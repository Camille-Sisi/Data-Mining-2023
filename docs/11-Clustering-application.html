<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 11 Clustering : application sur le RP 2019 | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 11 Clustering : application sur le RP 2019 | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 11 Clustering : application sur le RP 2019 | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />


<meta name="date" content="2023-05-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="10-Retour-sur-Shiny.html"/>
<link rel="next" href="12-Modeles-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération de la base de données</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>1.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="1.2" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#quelles-informations-intéressantes-dans-cette-base"><i class="fa fa-check"></i><b>1.2</b> Quelles informations intéressantes dans cette base ?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#sélectionner-un-champ-réduit-de-la-base-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Sélectionner un champ réduit de la base, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html"><i class="fa fa-check"></i><b>4</b> Récapitulatig séance 1 - Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#ce-quon-a-appris"><i class="fa fa-check"></i><b>4.1</b> Ce qu’on a appris</a></li>
<li class="chapter" data-level="4.2" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#enregistrement-des-tables"><i class="fa fa-check"></i><b>4.2</b> Enregistrement des tables</a></li>
</ul></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-des-logements-de-la-commune-de-paris"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques des logements de la commune de Paris</a></li>
<li class="chapter" data-level="5.2" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#systématiser-nos-procédures-construire-une-fonction"><i class="fa fa-check"></i><b>5.2</b> Systématiser nos procédures : construire une fonction</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="6" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>6</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>6.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>6.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="6.1.2" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>6.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>6.2</b> La réactivité</a></li>
<li class="chapter" data-level="6.3" data-path="06-Intro-a-Shiny-theorique.html"><a href="06-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>6.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>7</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>7.1</b> Application vide</a></li>
<li class="chapter" data-level="7.2" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>7.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="7.3" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>7.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="7.4" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>7.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="7.5" data-path="07-Intro-a-Shiny-exemples.html"><a href="07-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>7.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="part"><span><b>Séances 4 à 6 : Data Visualization</b></span></li>
<li class="chapter" data-level="8" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html"><i class="fa fa-check"></i><b>8</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>8.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>8.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="8.1.2" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>8.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="8.1.3" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>8.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="8.1.4" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>8.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="8.1.5" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>8.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="8.1.6" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>8.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="8.1.7" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>8.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="8.1.8" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>8.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="8.1.9" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>8.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08-Ggplot-theorique.html"><a href="08-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>8.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html"><i class="fa fa-check"></i><b>9</b> Le package Ggplot en pratiques</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>9.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="9.2" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>9.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#distribution-du-prix-au-m2-pour-les-appartements-selon-les-arrondissements-de-paris"><i class="fa fa-check"></i><b>9.2.1</b> Distribution du prix au m2 pour les appartements, selon les arrondissements de Paris</a></li>
<li class="chapter" data-level="9.2.2" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-département-de-paris-et-sa-petite-couronne"><i class="fa fa-check"></i><b>9.2.2</b> Comparaison des montants moyen et médian du prix au m2, par département de Paris et sa petite couronne</a></li>
<li class="chapter" data-level="9.2.3" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#evolution-du-prix-moyen-au-m2-des-ventes-dappartements-à-paris"><i class="fa fa-check"></i><b>9.2.3</b> Evolution du prix moyen au m2 des ventes d’appartements à Paris</a></li>
<li class="chapter" data-level="9.2.4" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-communes-ou-arrondissements"><i class="fa fa-check"></i><b>9.2.4</b> Top 5 du prix au m2 des ventes d’appartements selon les communes (ou arrondissements)</a></li>
<li class="chapter" data-level="9.2.5" data-path="09-Ggplot-pratique.html"><a href="09-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>9.2.5</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-Retour-sur-Shiny.html"><a href="10-Retour-sur-Shiny.html"><i class="fa fa-check"></i><b>10</b> Application sur Shiny</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Retour-sur-Shiny.html"><a href="10-Retour-sur-Shiny.html#application-avec-un-tableau-et-un-graphique"><i class="fa fa-check"></i><b>10.1</b> Application avec un tableau et un graphique</a></li>
<li class="chapter" data-level="10.2" data-path="10-Retour-sur-Shiny.html"><a href="10-Retour-sur-Shiny.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>10.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="10.3" data-path="10-Retour-sur-Shiny.html"><a href="10-Retour-sur-Shiny.html#introduction-dune-réactivité-sur-les-inputs-contexte-réactif"><i class="fa fa-check"></i><b>10.3</b> Introduction d’une réactivité sur les inputs (contexte réactif)</a></li>
</ul></li>
<li class="part"><span><b>Séance 7 : Data Mining</b></span></li>
<li class="chapter" data-level="11" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html"><i class="fa fa-check"></i><b>11</b> Clustering : application sur le RP 2019</a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#choix-des-variables-et-préparation-du-tableau-final"><i class="fa fa-check"></i><b>11.1</b> Choix des variables et préparation du tableau final</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#variables-socio-professionnelles-caractérisant-la-personne-de-référence-du-ménage"><i class="fa fa-check"></i><b>11.1.1</b> Variables socio-professionnelles caractérisant la personne de référence du ménage</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#création-des-différents-tableaux-de-contingence"><i class="fa fa-check"></i><b>11.1.2</b> Création des différents tableaux de contingence</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#création-du-tableau-final"><i class="fa fa-check"></i><b>11.1.3</b> Création du tableau final</a></li>
<li class="chapter" data-level="11.1.4" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#choix-des-variables-actives-dans-le-clustering"><i class="fa fa-check"></i><b>11.1.4</b> choix des variables actives dans le clustering</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#la-méthode-de-la-cah-appliquée-à-nos-données"><i class="fa fa-check"></i><b>11.2</b> La méthode de la CAH appliquée à nos données</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#constitution-des-classes"><i class="fa fa-check"></i><b>11.2.1</b> Constitution des classes</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#visualisation-sur-la-carte-de-la-commune"><i class="fa fa-check"></i><b>11.2.2</b> Visualisation sur la carte de la commune</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#interprétation"><i class="fa fa-check"></i><b>11.2.3</b> Interprétation</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-Clustering-application.html"><a href="11-Clustering-application.html#la-méthode-des-k-means-appliquée-à-nos-données"><i class="fa fa-check"></i><b>11.3</b> La méthode des <em>k-means</em> appliquée à nos données</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html"><i class="fa fa-check"></i><b>12</b> Modèles de régression : application sur le RP 2019</a>
<ul>
<li class="chapter" data-level="12.1" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#la-création-des-bases-dapprentissage-et-de-test"><i class="fa fa-check"></i><b>12.1</b> La création des bases d’apprentissage et de test</a></li>
<li class="chapter" data-level="12.2" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#un-modèle-à-visée-principale-descriptiveexplicative-la-régression-logistique"><i class="fa fa-check"></i><b>12.2</b> Un modèle à visée principale descriptive/explicative : la régression logistique</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#le-modèle-initial"><i class="fa fa-check"></i><b>12.2.1</b> Le modèle initial</a></li>
<li class="chapter" data-level="12.2.2" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#lévaluation-du-modèle-et-la-recherche-éventuelle-dun-meilleur-modèle"><i class="fa fa-check"></i><b>12.2.2</b> L’évaluation du modèle et la recherche éventuelle d’un “meilleur” modèle</a></li>
<li class="chapter" data-level="12.2.3" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#le-modèle-final-et-linterprétation-des-résultats"><i class="fa fa-check"></i><b>12.2.3</b> Le modèle final et l’interprétation des résultats</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#un-modèle-à-visée-principale-prédictive-labre-de-décision"><i class="fa fa-check"></i><b>12.3</b> Un modèle à visée principale prédictive : l’abre de décision</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#le-modèle-initial-1"><i class="fa fa-check"></i><b>12.3.1</b> Le modèle initial</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-Modeles-regression.html"><a href="12-Modeles-regression.html#lévaluation-du-modèle"><i class="fa fa-check"></i><b>12.3.2</b> L’évaluation du modèle</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c11-Clustering-application" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Section 11</span> Clustering : application sur le RP 2019<a href="11-Clustering-application.html#c11-Clustering-application" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<p>Pour un rappel des fondements théoriques des techniques de clustering, voir par exemple <a href="https://camille-sisi.github.io/Data-Mining-2022/14-Clustering-theorique.html" target="_blank">ici</a>, ou <a href="https://larmarange.github.io/analyse-R/classification-ascendante-hierarchique.html" target="_blank">là</a>.<br />
Ces techniques font partie des méthodes d’apprentissage dit non supervisé, il n’y a pas de variable d’intérêt ou variable cible, on cherche plutôt à rassembler des observations qui “se ressemblent” mais pas d’expliquer une variable/un phénomène par rapport à d’autres.</p>
<div id="choix-des-variables-et-préparation-du-tableau-final" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Choix des variables et préparation du tableau final<a href="11-Clustering-application.html#choix-des-variables-et-préparation-du-tableau-final" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A partir de la base du RP2019, l’objectif de notre analyse est de décrire une commune ou un groupe de communes, en rassemblant des zones infracommunales (IRIS) qui se ressemblent ou sont relativement homogènes, c’est-à-dire qui ont des caractéristiques proches. Mais, bien sûr, les méthodes de clustering peuvent être appliquées à toutes sortes de problématiques et de données.</p>
<p>Pour cela, on doit avoir un tableau avec <strong>n</strong> individus ou observations (lignes) et <strong>p</strong> variables (colonnes), la mesure des variables peut être des effectifs, mais aussi des proportions. L’idée étant de regrouper nos IRIS en classes homogènes (=<em>clusters</em>) en un nombre plus restreint, nos observations sont donc constituées ici par les IRIS. Il faut ensuite choisir sur quelles caractéristiques on va les regrouper et chercher une certaine homogénéité. Cela peut être à partir de différentes choses selon notre base de données : caractéristiques socio-professionnelles de la personne de référence du ménage, caractéristiques des logements.</p>
<div id="variables-socio-professionnelles-caractérisant-la-personne-de-référence-du-ménage" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Variables socio-professionnelles caractérisant la personne de référence du ménage<a href="11-Clustering-application.html#variables-socio-professionnelles-caractérisant-la-personne-de-référence-du-ménage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On va dans cet exemple (communes de l’Est parisien constitué des 11ème, 12ème et 20ème arrondissements de Paris) s’intéresser aux caractéristiques socio-professionnelles de la population, ici néanmoins par la seule personne de référence du ménage : on aura en lignes nos <strong>n</strong> IRIS des 3 arrondissements et en colonnes nos variables d’entrées, soient par exemple le nombre d’habitants, le nombre d’individus qui sont actuellement chômeurs, le nombre de personnes en emploi, le nombre d’individus qui ont moins de 15 ans, etc.</p>
<p>On va alors réutiliser la fonction créée précédemment <code>somme()</code> et on va en créer une autre pour avoir des tableaux de contingence dans le cas de variables ave plusieurs modalités.</p>
<p>Pour caractériser la population par IRIS à partir de variables socio-professionnnelles, on peut choisir des variables classiques du type : - diplôme le plus élevé (<code>DIPLM</code>, à recoder pour avoir moins de modalités) ; - type d’activité (<code>TACTM</code>) pour différencier les actifs des inactifs ; - condition d’emploi (<code>EMPLM</code>) ; - situation quant à l’immigration (<code>IMMIM</code>) ; - sexe (<code>SEXEM</code>).<br />
Il faudra néanmoins faire attention à ce que certaines modalités ne se recoupent pas entre elles, notamment quand l’information sur la population de plus de 14 ans est rassemblée dans une modalité spécifique, ou quand l’information est trop proche - par exemple la conditions d’emploi et le type d’activité. Mais on pourra le faire dans un second temps en étudiant les corrélations entre les variables finalement obtenues.</p>
<p>Regardons d’abord pour quelles variables un regroupement et un recodage des modalités est nécessaire, avant d’appliquer nos fonctions de tableaux de contingence.</p>
<p>Pour la variable de diplôme :</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="11-Clustering-application.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des librairies</span></span>
<span id="cb132-2"><a href="11-Clustering-application.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidyverse)</span></span>
<span id="cb132-3"><a href="11-Clustering-application.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co"># library(janitor)</span></span>
<span id="cb132-4"><a href="11-Clustering-application.html#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="co"># library(gt)</span></span>
<span id="cb132-5"><a href="11-Clustering-application.html#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="11-Clustering-application.html#cb132-6" aria-hidden="true" tabindex="-1"></a>meta <span class="sc">%&gt;%</span> </span>
<span id="cb132-7"><a href="11-Clustering-application.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(COD_VAR, COD_MOD, LIB_MOD) <span class="sc">%&gt;%</span> </span>
<span id="cb132-8"><a href="11-Clustering-application.html#cb132-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COD_VAR<span class="sc">==</span><span class="st">&quot;DIPLM&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 13 x 3
   COD_VAR COD_MOD LIB_MOD                                                      
   &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;                                                        
 1 DIPLM   1       Pas de scolarité ou arrêt avant la fin du primaire           
 2 DIPLM   2       Aucun diplôme et scolarité interrompue à la fin du primaire ~
 3 DIPLM   3       Aucun diplôme et scolarité jusqu’à la fin du collège ou au-d~
 4 DIPLM   11      CEP (certificat d’études primaires)                          
 5 DIPLM   12      BEPC, brevet élémentaire, brevet des collèges, DNB           
 6 DIPLM   13      CAP, BEP ou diplôme de niveau équivalent                     
 7 DIPLM   14      Baccalauréat général ou technologique, brevet supérieur, cap~
 8 DIPLM   15      Baccalauréat professionnel, brevet professionnel, de technic~
 9 DIPLM   16      BTS, DUT, Deug, Deust, diplôme de la santé ou du social de n~
10 DIPLM   17      Licence, licence pro, maîtrise, diplôme équivalent de niveau~
11 DIPLM   18      Master, DEA, DESS, diplôme grande école niveau bac+5, doctor~
12 DIPLM   19      Doctorat de recherche (hors santé)                           
13 DIPLM   YY      Hors résidence principale                                    </code></pre>
<p>Ici, il faut regrouper les modalités comme ceci par exemple : “Peu ou pas diplomés” (toutes les modalités en-dessous du Bac : “1”,“2”,“3”, “11”, “12” et “13”), “Bac” (quel que soit le type : modalités “14” et “15”), “Bac+2à4” (modalités “16” et “17”), “Bac+5ou+” (modalités “18” et “19”)</p>
<p>Pour la variable du type d’activités :</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="11-Clustering-application.html#cb134-1" aria-hidden="true" tabindex="-1"></a>meta <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="11-Clustering-application.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(COD_VAR, COD_MOD, LIB_MOD) <span class="sc">%&gt;%</span> </span>
<span id="cb134-3"><a href="11-Clustering-application.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COD_VAR<span class="sc">==</span><span class="st">&quot;TACTM&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 7 x 3
  COD_VAR COD_MOD LIB_MOD                  
  &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;                    
1 TACTM   11      Actifs ayant un emploi   
2 TACTM   12      Chômeurs                 
3 TACTM   21      Retraités ou préretraités
4 TACTM   22      Élèves                   
5 TACTM   24      Femmes ou hommes au foyer
6 TACTM   25      Autres inactifs          
7 TACTM   YY      Hors résidence principale</code></pre>
<p>On peut regrouper les 4 dernières modalités (hors “YY”) comme une catégorie large d’inactifs (“21”,“22”,“24” et “25”), ce qui permet d’avoir une distinction entre “en emploi”, “chômeurs” et “inactifs”. Il faudra faire attention néanmoins si on utilise également la condition d’emploi pour que cette variable ne soit pas redondante avec la modalité “en emploi”.</p>
<p>Et enfin, pour la condition d’emploi :</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="11-Clustering-application.html#cb136-1" aria-hidden="true" tabindex="-1"></a>meta <span class="sc">%&gt;%</span> </span>
<span id="cb136-2"><a href="11-Clustering-application.html#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(COD_VAR, COD_MOD, LIB_MOD) <span class="sc">%&gt;%</span> </span>
<span id="cb136-3"><a href="11-Clustering-application.html#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COD_VAR<span class="sc">==</span><span class="st">&quot;EMPLM&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 11 x 3
   COD_VAR COD_MOD LIB_MOD                                              
   &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;                                                
 1 EMPLM   11      En contrat d&#39;apprentissage ou de professionnalisation
 2 EMPLM   12      Placés par une agence d&#39;intérim                      
 3 EMPLM   13      Emplois aidés (contrat unique d&#39;insertion            
 4 EMPLM   14      Stagiaires rémunérés en entreprise                   
 5 EMPLM   15      Autres emplois à durée limitée                       
 6 EMPLM   16      Emplois sans limite de durée                         
 7 EMPLM   21      Non salariés : Indépendants                          
 8 EMPLM   22      Non salariés : Employeurs                            
 9 EMPLM   23      Non salariés : Aides familiaux                       
10 EMPLM   YY      Hors résidence principale                            
11 EMPLM   ZZ      Sans objet (sans emploi)                             </code></pre>
<p>Cette variable peut permettre de distinguer au sein des personnes en emploi, celles en contrat à durée indéterminée (ici modalités “16”) par rapport à celles avec d’autres types de contrats ou statuts (intérim - “12”, CDD - “15”, mais aussi stage - “14”, apprentissage - “11” ou encore emploi aidé - “13”), ou encore celles qui sont indépendants (ici “21”, “22”, “23”). C’est donc comme cela qu’on pourra regrouper ces modalités.</p>
</div>
<div id="création-des-différents-tableaux-de-contingence" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Création des différents tableaux de contingence<a href="11-Clustering-application.html#création-des-différents-tableaux-de-contingence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On crée notre nouvelle fonction qu’on va appeler <code>tab_cont_n_iris</code>, pour avoir en ligne les IRIS et en colonne chaque modalité de la variable en question :</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="11-Clustering-application.html#cb138-1" aria-hidden="true" tabindex="-1"></a>tab_cont_n_iris <span class="ot">&lt;-</span> <span class="cf">function</span>(data, arrdt_filtre, ..., nom_var, var, prefix_var)</span>
<span id="cb138-2"><a href="11-Clustering-application.html#cb138-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb138-3"><a href="11-Clustering-application.html#cb138-3" aria-hidden="true" tabindex="-1"></a>  tab_n <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb138-4"><a href="11-Clustering-application.html#cb138-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(ARM <span class="sc">%in%</span> arrdt_filtre) <span class="sc">%&gt;%</span></span>
<span id="cb138-5"><a href="11-Clustering-application.html#cb138-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb138-6"><a href="11-Clustering-application.html#cb138-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarise</span>({{ nom_var }} <span class="sc">:</span><span class="er">=</span> <span class="fu">round</span>(<span class="fu">sum</span>(IPONDL))) <span class="sc">%&gt;%</span> </span>
<span id="cb138-7"><a href="11-Clustering-application.html#cb138-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> {{ var }}, <span class="at">values_from =</span> {{ nom_var }},</span>
<span id="cb138-8"><a href="11-Clustering-application.html#cb138-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">values_fill =</span> <span class="dv">0</span>, <span class="at">names_prefix =</span> prefix_var)</span>
<span id="cb138-9"><a href="11-Clustering-application.html#cb138-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb138-10"><a href="11-Clustering-application.html#cb138-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tab_n)</span>
<span id="cb138-11"><a href="11-Clustering-application.html#cb138-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>On crée maintenant nos différents tableaux de contingence.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="11-Clustering-application.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On retire les résidences non principales (par n&#39;importe quelle variable </span></span>
<span id="cb139-2"><a href="11-Clustering-application.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co"># qui a cette modalité)</span></span>
<span id="cb139-3"><a href="11-Clustering-application.html#cb139-3" aria-hidden="true" tabindex="-1"></a>RP_1 <span class="ot">&lt;-</span> RP <span class="sc">%&gt;%</span> <span class="fu">filter</span>(SEXEM<span class="sc">!=</span><span class="st">&quot;Y&quot;</span>)</span>
<span id="cb139-4"><a href="11-Clustering-application.html#cb139-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-5"><a href="11-Clustering-application.html#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable du nombre d&#39;habitants</span></span>
<span id="cb139-6"><a href="11-Clustering-application.html#cb139-6" aria-hidden="true" tabindex="-1"></a>Nbhab <span class="ot">&lt;-</span> RP_1 <span class="sc">%&gt;%</span> <span class="fu">somme</span>(ARM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), </span>
<span id="cb139-7"><a href="11-Clustering-application.html#cb139-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">var_gpe=</span>IRIS, <span class="at">nom_var=</span>nb_hab, <span class="at">var1=</span><span class="fu">round</span>(IPONDL)) </span>
<span id="cb139-8"><a href="11-Clustering-application.html#cb139-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-9"><a href="11-Clustering-application.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable de diplôme : </span></span>
<span id="cb139-10"><a href="11-Clustering-application.html#cb139-10" aria-hidden="true" tabindex="-1"></a>dipl <span class="ot">&lt;-</span> RP_1 <span class="sc">%&gt;%</span> </span>
<span id="cb139-11"><a href="11-Clustering-application.html#cb139-11" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">dipl=</span><span class="fu">as.factor</span>(<span class="fu">case_when</span>(DIPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;01&quot;</span>, <span class="st">&quot;02&quot;</span>, <span class="st">&quot;03&quot;</span>, <span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;13&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Peu_pas_dipl&quot;</span>,</span>
<span id="cb139-12"><a href="11-Clustering-application.html#cb139-12" aria-hidden="true" tabindex="-1"></a>                                     DIPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;14&quot;</span>, <span class="st">&quot;15&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac&quot;</span>,</span>
<span id="cb139-13"><a href="11-Clustering-application.html#cb139-13" aria-hidden="true" tabindex="-1"></a>                                     DIPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;16&quot;</span>, <span class="st">&quot;17&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac+2ou4&quot;</span>,</span>
<span id="cb139-14"><a href="11-Clustering-application.html#cb139-14" aria-hidden="true" tabindex="-1"></a>                                     DIPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;18&quot;</span>, <span class="st">&quot;19&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac+5ou+&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb139-15"><a href="11-Clustering-application.html#cb139-15" aria-hidden="true" tabindex="-1"></a>         <span class="fu">tab_cont_n_iris</span>(<span class="at">arrdt_filtre=</span><span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, dipl,</span>
<span id="cb139-16"><a href="11-Clustering-application.html#cb139-16" aria-hidden="true" tabindex="-1"></a>                         <span class="at">nom_var=</span>diplome, <span class="at">var=</span>dipl, <span class="at">prefix_var=</span><span class="st">&quot;nb_&quot;</span>)</span>
<span id="cb139-17"><a href="11-Clustering-application.html#cb139-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-18"><a href="11-Clustering-application.html#cb139-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable de type d&#39;activité </span></span>
<span id="cb139-19"><a href="11-Clustering-application.html#cb139-19" aria-hidden="true" tabindex="-1"></a>activite <span class="ot">&lt;-</span> RP_1 <span class="sc">%&gt;%</span> </span>
<span id="cb139-20"><a href="11-Clustering-application.html#cb139-20" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">typ_act =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(TACTM <span class="sc">==</span> <span class="st">&quot;11&quot;</span> <span class="sc">~</span> <span class="st">&quot;en emploi&quot;</span>,</span>
<span id="cb139-21"><a href="11-Clustering-application.html#cb139-21" aria-hidden="true" tabindex="-1"></a>                              TACTM <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">~</span> <span class="st">&quot;chômeurs&quot;</span>,</span>
<span id="cb139-22"><a href="11-Clustering-application.html#cb139-22" aria-hidden="true" tabindex="-1"></a>                              TACTM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;21&quot;</span>,<span class="st">&quot;22&quot;</span>,<span class="st">&quot;24&quot;</span>,<span class="st">&quot;25&quot;</span>) <span class="sc">~</span> <span class="st">&quot;inactifs&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb139-23"><a href="11-Clustering-application.html#cb139-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tab_cont_n_iris</span>(<span class="at">arrdt_filtre=</span><span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, typ_act,</span>
<span id="cb139-24"><a href="11-Clustering-application.html#cb139-24" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nom_var=</span>activite, <span class="at">var=</span>typ_act, <span class="at">prefix_var=</span><span class="st">&quot;nb_&quot;</span>)</span>
<span id="cb139-25"><a href="11-Clustering-application.html#cb139-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-26"><a href="11-Clustering-application.html#cb139-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable de condition d&#39;emploi </span></span>
<span id="cb139-27"><a href="11-Clustering-application.html#cb139-27" aria-hidden="true" tabindex="-1"></a>cond_empl <span class="ot">&lt;-</span> RP_1 <span class="sc">%&gt;%</span> </span>
<span id="cb139-28"><a href="11-Clustering-application.html#cb139-28" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">cond_empl =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(EMPLM <span class="sc">==</span> <span class="st">&quot;16&quot;</span> <span class="sc">~</span> <span class="st">&quot;CDI&quot;</span>,</span>
<span id="cb139-29"><a href="11-Clustering-application.html#cb139-29" aria-hidden="true" tabindex="-1"></a>                              EMPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;11&quot;</span>,<span class="st">&quot;12&quot;</span>,<span class="st">&quot;13&quot;</span>,<span class="st">&quot;14&quot;</span>,<span class="st">&quot;15&quot;</span>) <span class="sc">~</span> <span class="st">&quot;EDDouautres&quot;</span>,</span>
<span id="cb139-30"><a href="11-Clustering-application.html#cb139-30" aria-hidden="true" tabindex="-1"></a>                              EMPLM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;21&quot;</span>,<span class="st">&quot;22&quot;</span>,<span class="st">&quot;23&quot;</span>) <span class="sc">~</span> <span class="st">&quot;independants&quot;</span>,</span>
<span id="cb139-31"><a href="11-Clustering-application.html#cb139-31" aria-hidden="true" tabindex="-1"></a>                              EMPLM <span class="sc">==</span> <span class="st">&quot;ZZ&quot;</span> <span class="sc">~</span> <span class="st">&quot;sans_emploi&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb139-32"><a href="11-Clustering-application.html#cb139-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tab_cont_n_iris</span>(<span class="at">arrdt_filtre=</span><span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, cond_empl,</span>
<span id="cb139-33"><a href="11-Clustering-application.html#cb139-33" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nom_var=</span>condempl, <span class="at">var=</span>cond_empl, <span class="at">prefix_var=</span><span class="st">&quot;nb_&quot;</span>)</span>
<span id="cb139-34"><a href="11-Clustering-application.html#cb139-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-35"><a href="11-Clustering-application.html#cb139-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable de sexe : </span></span>
<span id="cb139-36"><a href="11-Clustering-application.html#cb139-36" aria-hidden="true" tabindex="-1"></a>sexe <span class="ot">&lt;-</span> RP_1 <span class="sc">%&gt;%</span>  </span>
<span id="cb139-37"><a href="11-Clustering-application.html#cb139-37" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">SEXEM =</span> <span class="fu">factor</span>(SEXEM, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Homme&quot;</span>, <span class="st">&quot;Femme&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb139-38"><a href="11-Clustering-application.html#cb139-38" aria-hidden="true" tabindex="-1"></a>         <span class="fu">tab_cont_n_iris</span>(<span class="at">arrdt_filtre=</span><span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), IRIS, SEXEM,</span>
<span id="cb139-39"><a href="11-Clustering-application.html#cb139-39" aria-hidden="true" tabindex="-1"></a>                        <span class="at">nom_var=</span>sexe, <span class="at">var=</span>SEXEM, <span class="at">prefix_var=</span><span class="st">&quot;nb_&quot;</span>)</span>
<span id="cb139-40"><a href="11-Clustering-application.html#cb139-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-41"><a href="11-Clustering-application.html#cb139-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour la variable renseignant du nombre d&#39;immigrés :</span></span>
<span id="cb139-42"><a href="11-Clustering-application.html#cb139-42" aria-hidden="true" tabindex="-1"></a>immi <span class="ot">&lt;-</span> RP <span class="sc">%&gt;%</span></span>
<span id="cb139-43"><a href="11-Clustering-application.html#cb139-43" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(IMMIM<span class="sc">==</span><span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb139-44"><a href="11-Clustering-application.html#cb139-44" aria-hidden="true" tabindex="-1"></a>         <span class="fu">somme</span>(ARM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>), </span>
<span id="cb139-45"><a href="11-Clustering-application.html#cb139-45" aria-hidden="true" tabindex="-1"></a>               <span class="at">var_gpe=</span>IRIS, <span class="at">nom_var=</span>nb_immi, <span class="at">var1=</span><span class="fu">round</span>(IPONDL))</span>
<span id="cb139-46"><a href="11-Clustering-application.html#cb139-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-47"><a href="11-Clustering-application.html#cb139-47" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime la table RP_1 pour ne pas surcharger l&#39;environnement</span></span>
<span id="cb139-48"><a href="11-Clustering-application.html#cb139-48" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(RP_1)</span></code></pre></div>
</div>
<div id="création-du-tableau-final" class="section level3 hasAnchor" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Création du tableau final<a href="11-Clustering-application.html#création-du-tableau-final" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On va rassembler tous ces tableaux et donc ces informations en un seul tableau. Comme on a plus de 2 tableaux à fusionner, on utilise une liste dans laquelle on stocke l’ensemble de nos tableaux, et ensuite on réalise une jointure avec <code>left_join</code>, mais en passant par la fonction <code>reduce()</code> du package <code>purr()</code> qui est inclus dans <code>tidyverse</code> pour l’appliquer à notre liste de tableaux.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="11-Clustering-application.html#cb140-1" aria-hidden="true" tabindex="-1"></a>list_tab <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">data.frame</span>(Nbhab), <span class="fu">data.frame</span>(dipl), <span class="fu">data.frame</span>(activite), </span>
<span id="cb140-2"><a href="11-Clustering-application.html#cb140-2" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">data.frame</span>(cond_empl), <span class="fu">data.frame</span>(sexe), <span class="fu">data.frame</span>(immi)) </span>
<span id="cb140-3"><a href="11-Clustering-application.html#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="11-Clustering-application.html#cb140-4" aria-hidden="true" tabindex="-1"></a>clust <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(purrr<span class="sc">::</span><span class="fu">reduce</span>(list_tab, left_join, <span class="at">by=</span><span class="st">&#39;IRIS&#39;</span>))</span>
<span id="cb140-5"><a href="11-Clustering-application.html#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clust)</span></code></pre></div>
<pre><code># A tibble: 6 x 16
  IRIS      nb_hab nb_Bac nb_Bac.2ou4 nb_Bac.5ou. nb_Peu_pas_dipl nb_chômeurs
  &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;       &lt;dbl&gt;
1 751114101   1595    220         384         502             464         170
2 751114102   1466    164         450         659             289         173
3 751114103    928    116         259         456             155         102
4 751114104    944    109         206         431             154         108
5 751114105   1082    144         215         532             236          71
6 751114106   1446    181         396         667             247          93
# i 9 more variables: nb_en.emploi &lt;dbl&gt;, nb_inactifs &lt;dbl&gt;, nb_CDI &lt;dbl&gt;,
#   nb_EDDouautres &lt;dbl&gt;, nb_independants &lt;dbl&gt;, nb_sans_emploi &lt;dbl&gt;,
#   nb_Homme &lt;dbl&gt;, nb_Femme &lt;dbl&gt;, nb_immi &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="11-Clustering-application.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime les tables intermédiaires pour ne pas surchager notre environnement</span></span>
<span id="cb142-2"><a href="11-Clustering-application.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(Nbhab, dipl, activite, cond_empl, sexe, immi)</span></code></pre></div>
<p>On va rajouter le nom des IRIS pour chaque commune et l’inclure comme identifiant dans le tableau, c’est-à-dire dans le nom de la 1ère colonne (avec la fonction <code>row.names()</code>), cela peut être conseillé pour la procédure de clustering, afin que chaque IRIS soit bien identifié par son nom (label) ; on verra toutefois dans notre exemple que cela devient illisible si on a trop d’IRIS/individus. Pour cela, on va récupérer le nom des IRIS dans le fichier de métadonnées “meta”, en supprimant l’information entre parenthèses avec la fonction <code>str_replace()</code> pour n’avoir que le numéro de l’IRIS :</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="11-Clustering-application.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On récupère les noms des IRIS dans le fichier de métadonnées &quot;meta&quot;</span></span>
<span id="cb143-2"><a href="11-Clustering-application.html#cb143-2" aria-hidden="true" tabindex="-1"></a>list_nom_IRIS <span class="ot">&lt;-</span> meta <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="11-Clustering-application.html#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">COM =</span> <span class="fu">substr</span>(COD_MOD, <span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb143-4"><a href="11-Clustering-application.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(COD_VAR, COD_MOD, LIB_MOD, COM) <span class="sc">%&gt;%</span> </span>
<span id="cb143-5"><a href="11-Clustering-application.html#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COD_VAR <span class="sc">==</span> <span class="st">&quot;IRIS&quot;</span> <span class="sc">&amp;</span> COM <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb143-6"><a href="11-Clustering-application.html#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">IRIS =</span> COD_MOD) <span class="sc">%&gt;%</span> </span>
<span id="cb143-7"><a href="11-Clustering-application.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LIB_MOD, IRIS) </span>
<span id="cb143-8"><a href="11-Clustering-application.html#cb143-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-9"><a href="11-Clustering-application.html#cb143-9" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime la fin du nom qui est entre parenthèse gràce à une expression régulière</span></span>
<span id="cb143-10"><a href="11-Clustering-application.html#cb143-10" aria-hidden="true" tabindex="-1"></a>list_nom_IRIS<span class="sc">$</span>LIB_MOD <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(list_nom_IRIS<span class="sc">$</span>LIB_MOD, <span class="st">&quot; </span><span class="sc">\\</span><span class="st">s*</span><span class="sc">\\</span><span class="st">([^</span><span class="sc">\\</span><span class="st">)]+</span><span class="sc">\\</span><span class="st">)&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb143-11"><a href="11-Clustering-application.html#cb143-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-12"><a href="11-Clustering-application.html#cb143-12" aria-hidden="true" tabindex="-1"></a>clust <span class="ot">&lt;-</span> <span class="fu">left_join</span>(clust, list_nom_IRIS, <span class="at">by=</span><span class="st">&quot;IRIS&quot;</span>)</span>
<span id="cb143-13"><a href="11-Clustering-application.html#cb143-13" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(clust) <span class="ot">&lt;-</span> clust<span class="sc">$</span>LIB_MOD</span>
<span id="cb143-14"><a href="11-Clustering-application.html#cb143-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(clust)</span></code></pre></div>
<pre><code># A tibble: 6 x 17
  IRIS      nb_hab nb_Bac nb_Bac.2ou4 nb_Bac.5ou. nb_Peu_pas_dipl nb_chômeurs
  &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;       &lt;dbl&gt;
1 751114101   1595    220         384         502             464         170
2 751114102   1466    164         450         659             289         173
3 751114103    928    116         259         456             155         102
4 751114104    944    109         206         431             154         108
5 751114105   1082    144         215         532             236          71
6 751114106   1446    181         396         667             247          93
# i 10 more variables: nb_en.emploi &lt;dbl&gt;, nb_inactifs &lt;dbl&gt;, nb_CDI &lt;dbl&gt;,
#   nb_EDDouautres &lt;dbl&gt;, nb_independants &lt;dbl&gt;, nb_sans_emploi &lt;dbl&gt;,
#   nb_Homme &lt;dbl&gt;, nb_Femme &lt;dbl&gt;, nb_immi &lt;dbl&gt;, LIB_MOD &lt;chr&gt;</code></pre>
<p>Une dernière étape est de faire attention aux IRIS qui compte trop peu d’habitants ; dans le 12ème arrondissement par exemple, il y a le Bois de Vincennes, donc il faut probablement le supprimer. On va regarder combien et quel IRIS est concerné. Il y aura donc des données manquantes pour ces 2 quartiers dans la carte finale qu’on réalisera avec la répartition des IRIS selon les clusters obtenus…</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="11-Clustering-application.html#cb145-1" aria-hidden="true" tabindex="-1"></a>clust <span class="sc">%&gt;%</span> <span class="fu">filter</span>(nb_hab<span class="sc">&lt;=</span><span class="dv">250</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 17
  IRIS      nb_hab nb_Bac nb_Bac.2ou4 nb_Bac.5ou. nb_Peu_pas_dipl nb_chômeurs
  &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;       &lt;dbl&gt;
1 751124577    132     23          86           1              25           0
2 751124677    122      5           7          78              32           1
3 751124707    210     23          49         110              44          10
4 751207917      2      1           0           0               1           0
# i 10 more variables: nb_en.emploi &lt;dbl&gt;, nb_inactifs &lt;dbl&gt;, nb_CDI &lt;dbl&gt;,
#   nb_EDDouautres &lt;dbl&gt;, nb_independants &lt;dbl&gt;, nb_sans_emploi &lt;dbl&gt;,
#   nb_Homme &lt;dbl&gt;, nb_Femme &lt;dbl&gt;, nb_immi &lt;dbl&gt;, LIB_MOD &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="11-Clustering-application.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On supprime donc ces 4 IRIS</span></span>
<span id="cb147-2"><a href="11-Clustering-application.html#cb147-2" aria-hidden="true" tabindex="-1"></a>clust <span class="ot">&lt;-</span> clust <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>IRIS <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;751124577&quot;</span>, <span class="st">&quot;751124677&quot;</span>, <span class="st">&quot;751124707&quot;</span>, <span class="st">&quot;751207917&quot;</span>))</span></code></pre></div>
</div>
<div id="choix-des-variables-actives-dans-le-clustering" class="section level3 hasAnchor" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> choix des variables actives dans le clustering<a href="11-Clustering-application.html#choix-des-variables-actives-dans-le-clustering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Il nous reste, en dernière étape, de choisir les variables à inclure dans le clustering et vérifier si certaines d’entre elles ne sont pas corrélées, c’est-à-dire ne donnent pas la même information. Cela est important car sinon dans la procédure de clustering, cela s’apparente à donner un poids supérieur à une information si on la met en double voire en triple par exemple. C’est typiquement le cas pour les modalités de la variable de type d’activité “inactifs” ou “chômeurs” et la modalité de la variable de condition d’emploi “sans_emploi” : si on les laisse toutes les deux, la même information va peser 2 fois dans l’analyse.</p>
<p>Pour simplifier la procédure et surtout l’interprétation des résultats, on va réaliser un clustering avec quelques variables socio-professionnelles.</p>
<p>On peut vérifier la corrélation à l’aide d’une fonction comme <code>cor()</code> combinées avec la fonction <code>symnum()</code>, ou <code>rcorr()</code> du package <code>Hmisc</code>, ou <code>corrplot()</code> du package du même nom, ou encore <code>pairs()</code>. Attention toutefois, ces fonctions ne s’appliquent que sur des variables numériques, il nous faut donc sélectionner les colonnes sans la première (code IRIS), ni la dernière (libellé IRIS), ou en sélectionnant les seules variables qui nous intéressent. Attention bis (!) : comme ici nous avons beaucoup de variables, il vaut mieux sélectionner des variables par groupe de 10 ou 15 par exemple car sinon cela peut-être illisible selon les fonctions !</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="11-Clustering-application.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># names(clust)</span></span>
<span id="cb148-2"><a href="11-Clustering-application.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(clust[, <span class="fu">c</span>(<span class="st">&quot;nb_hab&quot;</span> , <span class="st">&quot;nb_Bac&quot;</span>, <span class="st">&quot;nb_Bac.2ou4&quot;</span> , <span class="st">&quot;nb_Bac.5ou.&quot;</span>, <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>, <span class="st">&quot;nb_chômeurs&quot;</span>, <span class="st">&quot;nb_en.emploi&quot;</span>,</span>
<span id="cb148-3"><a href="11-Clustering-application.html#cb148-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;nb_inactifs&quot;</span>, <span class="st">&quot;nb_CDI&quot;</span>, <span class="st">&quot;nb_EDDouautres&quot;</span>,  <span class="st">&quot;nb_independants&quot;</span>, <span class="st">&quot;nb_sans_emploi&quot;</span>, <span class="st">&quot;nb_Homme&quot;</span>, <span class="st">&quot;nb_Femme&quot;</span>, <span class="st">&quot;nb_immi&quot;</span>)])</span></code></pre></div>
<pre><code>                   nb_hab    nb_Bac nb_Bac.2ou4  nb_Bac.5ou. nb_Peu_pas_dipl
nb_hab          1.0000000 0.8479488   0.9247848  0.736002172      0.50729089
nb_Bac          0.8479488 1.0000000   0.7448261  0.446648576      0.61497930
nb_Bac.2ou4     0.9247848 0.7448261   1.0000000  0.780986989      0.30377262
nb_Bac.5ou.     0.7360022 0.4466486   0.7809870  1.000000000     -0.16292611
nb_Peu_pas_dipl 0.5072909 0.6149793   0.3037726 -0.162926110      1.00000000
nb_chômeurs     0.6816670 0.7177205   0.5946751  0.288665419      0.66445148
nb_en.emploi    0.9485273 0.7907836   0.9357874  0.813416017      0.35646919
nb_inactifs     0.8257869 0.7400556   0.7164255  0.488899035      0.59983435
nb_CDI          0.9376096 0.8076210   0.9062100  0.715671158      0.45665277
nb_EDDouautres  0.6563692 0.5729311   0.6597554  0.597917872      0.20549565
nb_independants 0.6352261 0.4199977   0.6809994  0.820243286     -0.08615219
nb_sans_emploi  0.8731755 0.8127794   0.7585245  0.484447380      0.68228037
nb_Homme        0.9605740 0.8368407   0.9078513  0.737362848      0.47903896
nb_Femme        0.9622252 0.8305347   0.9110366  0.711177012      0.51202263
nb_immi         0.5769748 0.6527680   0.3739943  0.008326585      0.86519656
                nb_chômeurs nb_en.emploi nb_inactifs    nb_CDI nb_EDDouautres
nb_hab            0.6816670    0.9485273   0.8257869 0.9376096      0.6563692
nb_Bac            0.7177205    0.7907836   0.7400556 0.8076210      0.5729311
nb_Bac.2ou4       0.5946751    0.9357874   0.7164255 0.9062100      0.6597554
nb_Bac.5ou.       0.2886654    0.8134160   0.4888990 0.7156712      0.5979179
nb_Peu_pas_dipl   0.6644515    0.3564692   0.5998343 0.4566528      0.2054957
nb_chômeurs       1.0000000    0.6271495   0.5194999 0.6106666      0.5661625
nb_en.emploi      0.6271495    1.0000000   0.6488894 0.9619222      0.7325112
nb_inactifs       0.5194999    0.6488894   1.0000000 0.6885689      0.3442777
nb_CDI            0.6106666    0.9619222   0.6885689 1.0000000      0.5752262
nb_EDDouautres    0.5661625    0.7325112   0.3442777 0.5752262      1.0000000
nb_independants   0.3470646    0.7284573   0.3561869 0.5471033      0.6080771
nb_sans_emploi    0.7122787    0.7123865   0.9697723 0.7401952      0.4446805
nb_Homme          0.6899914    0.9496718   0.7656565 0.9216635      0.6908547
nb_Femme          0.6838107    0.9197890   0.8317221 0.9182378      0.6201284
nb_immi           0.7455824    0.4599014   0.5361956 0.4881757      0.4210433
                nb_independants nb_sans_emploi  nb_Homme  nb_Femme     nb_immi
nb_hab               0.63522610      0.8731755 0.9605740 0.9622252 0.576974760
nb_Bac               0.41999769      0.8127794 0.8368407 0.8305347 0.652767986
nb_Bac.2ou4          0.68099944      0.7585245 0.9078513 0.9110366 0.373994262
nb_Bac.5ou.          0.82024329      0.4844474 0.7373628 0.7111770 0.008326585
nb_Peu_pas_dipl     -0.08615219      0.6822804 0.4790390 0.5120226 0.865196556
nb_chômeurs          0.34706461      0.7122787 0.6899914 0.6838107 0.745582396
nb_en.emploi         0.72845728      0.7123865 0.9496718 0.9197890 0.459901421
nb_inactifs          0.35618692      0.9697723 0.7656565 0.8317221 0.536195590
nb_CDI               0.54710328      0.7401952 0.9216635 0.9182378 0.488175700
nb_EDDouautres       0.60807711      0.4446805 0.6908547 0.6201284 0.421043286
nb_independants      1.00000000      0.3921254 0.6679781 0.5977243 0.111602715
nb_sans_emploi       0.39212544      1.0000000 0.8261196 0.8786889 0.653339741
nb_Homme             0.66797814      0.8261196 1.0000000 0.8887148 0.585342998
nb_Femme             0.59772430      0.8786889 0.8887148 1.0000000 0.521287797
nb_immi              0.11160271      0.6533397 0.5853430 0.5212878 1.000000000</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="11-Clustering-application.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On va retirer : &quot;nb_hab&quot; , &quot;nb_en.emploi&quot;, &quot;nb_sans_emploi&quot;,&quot;nb_Homme&quot;,</span></span>
<span id="cb150-2"><a href="11-Clustering-application.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;nb_Femme&quot;, &quot;nb_CDI&quot;,&quot;nb_Bac.2ou4&quot; </span></span>
<span id="cb150-3"><a href="11-Clustering-application.html#cb150-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-4"><a href="11-Clustering-application.html#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour voir plus rapidement avec des indications les fortes corrélations et </span></span>
<span id="cb150-5"><a href="11-Clustering-application.html#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sans les variables mentionnées ci-dessous :</span></span>
<span id="cb150-6"><a href="11-Clustering-application.html#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="fu">symnum</span>(<span class="fu">cor</span>(clust[ , <span class="fu">c</span>(<span class="st">&quot;nb_Bac&quot;</span>,  <span class="st">&quot;nb_Bac.5ou.&quot;</span>, <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>, <span class="st">&quot;nb_chômeurs&quot;</span>, <span class="st">&quot;nb_CDI&quot;</span>,</span>
<span id="cb150-7"><a href="11-Clustering-application.html#cb150-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;nb_inactifs&quot;</span>, <span class="st">&quot;nb_EDDouautres&quot;</span>,  <span class="st">&quot;nb_independants&quot;</span>,  <span class="st">&quot;nb_immi&quot;</span>)]))</span></code></pre></div>
<pre><code>                nb_B n_B. n_P nb_c n_C nb_nc n_E nb_nd nb_m
nb_Bac          1                                          
nb_Bac.5ou.     .    1                                     
nb_Peu_pas_dipl ,         1                                
nb_chômeurs     ,         ,   1                            
nb_CDI          +    ,    .   ,    1                       
nb_inactifs     ,    .    .   .    ,   1                   
nb_EDDouautres  .    .        .    .   .     1             
nb_independants .    +        .    .   .     ,   1         
nb_immi         ,         +   ,    .   .     .         1   
attr(,&quot;legend&quot;)
[1] 0 &#39; &#39; 0.3 &#39;.&#39; 0.6 &#39;,&#39; 0.8 &#39;+&#39; 0.9 &#39;*&#39; 0.95 &#39;B&#39; 1</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="11-Clustering-application.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour info avec le package `corrplot`</span></span>
<span id="cb152-2"><a href="11-Clustering-application.html#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb152-3"><a href="11-Clustering-application.html#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(<span class="fu">cor</span>(clust[, <span class="fu">c</span>(<span class="st">&quot;nb_Bac&quot;</span>,  <span class="st">&quot;nb_Bac.5ou.&quot;</span>, <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>, <span class="st">&quot;nb_chômeurs&quot;</span>, <span class="st">&quot;nb_CDI&quot;</span>, <span class="st">&quot;nb_inactifs&quot;</span>, <span class="st">&quot;nb_EDDouautres&quot;</span>,  <span class="st">&quot;nb_independants&quot;</span>, <span class="st">&quot;nb_immi&quot;</span>)]), </span>
<span id="cb152-4"><a href="11-Clustering-application.html#cb152-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">type=</span><span class="st">&quot;upper&quot;</span>, <span class="at">method=</span><span class="st">&quot;number&quot;</span>, <span class="at">tl.col=</span><span class="st">&quot;black&quot;</span>, <span class="at">tl.srt=</span><span class="dv">40</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Corr-1.svg" width="672" /></p>
<p>Pour le dernier graphique, si la couleur est bleu foncé, ou si le coefficient est proche de 1, cela signifie que les variables sont corrélées (la statistique utilisée est le coefficient de corrélation de Pearson qui indique une relation linéaire entre deux variables continues, il varie entre -1 et 1 comme on peut le remarquer sur les premières matrices obtenues avec <code>corrplot()</code>).</p>
<p>On remarque ainsi que les variables de nombre d’habitants, nombre de personnes en emploi, nombre de personnes sans emploi, les deux variables de sexe, le nombre de CDI ou encore le nombre de bac +2 à 4 sont trop corrélées (cf. 1er tableau général des corrélations), soit entre elles soit avec d’autres variables. On décide donc de ne pas les retenir.</p>
<p>On va donc procéder à la suppression de certaines colonnes de notre table finale.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="11-Clustering-application.html#cb153-1" aria-hidden="true" tabindex="-1"></a>clust_socioprof <span class="ot">&lt;-</span> clust[, <span class="fu">c</span>(<span class="st">&quot;nb_Bac&quot;</span>,  <span class="st">&quot;nb_Bac.5ou.&quot;</span>, <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>, </span>
<span id="cb153-2"><a href="11-Clustering-application.html#cb153-2" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;nb_chômeurs&quot;</span>, <span class="st">&quot;nb_CDI&quot;</span>, <span class="st">&quot;nb_inactifs&quot;</span>, </span>
<span id="cb153-3"><a href="11-Clustering-application.html#cb153-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;nb_EDDouautres&quot;</span>,  <span class="st">&quot;nb_independants&quot;</span>,  <span class="st">&quot;nb_immi&quot;</span>)]</span></code></pre></div>
<p>Il peut être également plus pertinent de ne pas raisonner en nombre mais plutôt en proportion, pour éviter de capter un effet taille du nombre d’habitants dans un quartier donné. Dans ce cas, on calcule les proportions pour chacune de nos variables finales et on crée un nouvel objet pour cela.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="11-Clustering-application.html#cb154-1" aria-hidden="true" tabindex="-1"></a>clust_socioprof_prop <span class="ot">&lt;-</span> clust <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="11-Clustering-application.html#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&quot;nb_hab&quot;</span>, <span class="st">&quot;nb_Bac&quot;</span>,  <span class="st">&quot;nb_Bac.5ou.&quot;</span>, <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>, <span class="st">&quot;nb_chômeurs&quot;</span>,</span>
<span id="cb154-3"><a href="11-Clustering-application.html#cb154-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;nb_CDI&quot;</span>, <span class="st">&quot;nb_inactifs&quot;</span>, <span class="st">&quot;nb_EDDouautres&quot;</span>,  <span class="st">&quot;nb_independants&quot;</span>,  </span>
<span id="cb154-4"><a href="11-Clustering-application.html#cb154-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;nb_immi&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb154-5"><a href="11-Clustering-application.html#cb154-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_Bac =</span> (nb_Bac <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-6"><a href="11-Clustering-application.html#cb154-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_Bac5ouplus =</span> (nb_Bac<span class="fl">.5</span>ou.<span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-7"><a href="11-Clustering-application.html#cb154-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_Peu_pas_dipl =</span> (nb_Peu_pas_dipl <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-8"><a href="11-Clustering-application.html#cb154-8" aria-hidden="true" tabindex="-1"></a>         pct_chômeurs <span class="ot">=</span> (nb_chômeurs <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-9"><a href="11-Clustering-application.html#cb154-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_CDI =</span> (nb_CDI <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-10"><a href="11-Clustering-application.html#cb154-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_inactifs =</span> (nb_inactifs <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-11"><a href="11-Clustering-application.html#cb154-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_EDDouautres =</span> (nb_EDDouautres <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-12"><a href="11-Clustering-application.html#cb154-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_independants =</span> (nb_independants <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb154-13"><a href="11-Clustering-application.html#cb154-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_immi =</span> (nb_immi <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb154-14"><a href="11-Clustering-application.html#cb154-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pct_Bac, pct_Bac5ouplus, pct_Peu_pas_dipl, pct_chômeurs, pct_CDI, </span>
<span id="cb154-15"><a href="11-Clustering-application.html#cb154-15" aria-hidden="true" tabindex="-1"></a>         pct_inactifs, pct_EDDouautres, pct_independants, pct_immi)</span></code></pre></div>
</div>
</div>
<div id="la-méthode-de-la-cah-appliquée-à-nos-données" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> La méthode de la CAH appliquée à nos données<a href="11-Clustering-application.html#la-méthode-de-la-cah-appliquée-à-nos-données" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="constitution-des-classes" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Constitution des classes<a href="11-Clustering-application.html#constitution-des-classes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On reprend les étapes de la méthode décrite <a href="https://camille-sisi.github.io/Data-Mining-2022/14-Clustering-theorique.html" target="_blank">ici</a>, une par une.
Pour la classification réalisée sur le tableau de contingence en effectifs, on utilise la méthode euclidienne pour la matrice des distances ; mais pour la classification réalisée sur le tableau de contingence en pourcentage (pour éviter un effet taille de nos IRIS), il faut utiliser la distance du khi-2. Pour cette dernière, nous avons besoin du package <strong><code>ade4</code></strong> (à installer avant de le charger) et de sa fonction <code>dist.dudi</code>. Attention, cette fonction doit être utilisée sur un format particulier c’est pourquoi on l’utilise avec la fonction <code>dudi.coa</code>. Enfin, l’option <code>amongrow=TRUE</code> de la fonction <code>dist.dudi</code> permet de préciser que les distances doivent être calculées entre lignes, c’est-à-dire ici entre nos individus constitués par les IRIS (<code>FALSE</code> si on veut que la distance soit calculée entre colonnes).</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="11-Clustering-application.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Etape 1 : on centre et réduit les variables si on prend la table en nombre</span></span>
<span id="cb155-2"><a href="11-Clustering-application.html#cb155-2" aria-hidden="true" tabindex="-1"></a>clust_socioprof_sc <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">scale</span>(clust_socioprof)) </span>
<span id="cb155-3"><a href="11-Clustering-application.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co"># on n&#39;applique pas cette procédure sur la table en proportion</span></span>
<span id="cb155-4"><a href="11-Clustering-application.html#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="11-Clustering-application.html#cb155-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-6"><a href="11-Clustering-application.html#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ade4&quot;)</span></span>
<span id="cb155-7"><a href="11-Clustering-application.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ade4)</span>
<span id="cb155-8"><a href="11-Clustering-application.html#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Etape 2 : on crée la matrice de distance, en utilisant la distance euclidienne </span></span>
<span id="cb155-9"><a href="11-Clustering-application.html#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="co">#standard pour la table en nombre, et la distance du khi-2 pour la table en %</span></span>
<span id="cb155-10"><a href="11-Clustering-application.html#cb155-10" aria-hidden="true" tabindex="-1"></a>dist_mat_socioprof_n <span class="ot">&lt;-</span> <span class="fu">dist</span>(clust_socioprof_sc, <span class="at">method =</span> <span class="st">&#39;euclidean&#39;</span>)</span>
<span id="cb155-11"><a href="11-Clustering-application.html#cb155-11" aria-hidden="true" tabindex="-1"></a>dist_mat_socioprof_p <span class="ot">&lt;-</span> <span class="fu">dist.dudi</span>(<span class="fu">dudi.coa</span>(clust_socioprof_prop, <span class="at">scannf=</span><span class="cn">FALSE</span>, <span class="at">nf=</span><span class="dv">10</span>),</span>
<span id="cb155-12"><a href="11-Clustering-application.html#cb155-12" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">amongrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb155-13"><a href="11-Clustering-application.html#cb155-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-14"><a href="11-Clustering-application.html#cb155-14" aria-hidden="true" tabindex="-1"></a><span class="co"># si vous souhaitez voir et comparer les matrices de distances, </span></span>
<span id="cb155-15"><a href="11-Clustering-application.html#cb155-15" aria-hidden="true" tabindex="-1"></a><span class="co"># vous devez les transformer en matrix avec la fonction &#39;as.matrix&#39;, par exemple :</span></span>
<span id="cb155-16"><a href="11-Clustering-application.html#cb155-16" aria-hidden="true" tabindex="-1"></a><span class="co"># as.matrix(dist_mat_socioprof_n)</span></span>
<span id="cb155-17"><a href="11-Clustering-application.html#cb155-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-18"><a href="11-Clustering-application.html#cb155-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-19"><a href="11-Clustering-application.html#cb155-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Etape 3 : on choisit la méthode d&#39;agrégation, ici la plus standard, le critère de Ward</span></span>
<span id="cb155-20"><a href="11-Clustering-application.html#cb155-20" aria-hidden="true" tabindex="-1"></a>classif_socioprof_n <span class="ot">&lt;-</span> <span class="fu">hclust</span>(dist_mat_socioprof_n, <span class="at">method =</span> <span class="st">&quot;ward.D2&quot;</span>)</span>
<span id="cb155-21"><a href="11-Clustering-application.html#cb155-21" aria-hidden="true" tabindex="-1"></a>classif_socioprof_p <span class="ot">&lt;-</span> <span class="fu">hclust</span>(dist_mat_socioprof_p, <span class="at">method =</span> <span class="st">&quot;ward.D2&quot;</span>)</span>
<span id="cb155-22"><a href="11-Clustering-application.html#cb155-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-23"><a href="11-Clustering-application.html#cb155-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-24"><a href="11-Clustering-application.html#cb155-24" aria-hidden="true" tabindex="-1"></a><span class="co">#Etape 4 : on visualise l&#39;arbre de classification ou dendogramme</span></span>
<span id="cb155-25"><a href="11-Clustering-application.html#cb155-25" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(classif_socioprof_n, <span class="at">xlab=</span><span class="st">&quot;IRIS&quot;</span>,  <span class="at">main=</span><span class="st">&quot;Dendogramme table effectifs&quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Etapes_CAH-1.svg" width="672" /></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="11-Clustering-application.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(classif_socioprof_p, <span class="at">xlab=</span><span class="st">&quot;IRIS&quot;</span>,  <span class="at">main=</span><span class="st">&quot;Dendogramme table proportion&quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Etapes_CAH-2.svg" width="672" /></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="11-Clustering-application.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(classif_socioprof_n, xlab=&quot;IRIS&quot;,  main=&quot;Dendogramme&quot;, labels=FALSE)</span></span></code></pre></div>
<p>On remarque ici que comme nous avons mis en label (<em>row.names</em>) le nom des IRIS, on peut tout de suite savoir quels IRIS sont proches et vont former des classes. Toutefois, avec 190 IRIS ce n’est absolument pas lisible !! Donc on peut aussi les enlever avec l’option <code>label=FALSE</code> dans la fonction <code>plot()</code>.<br />
Il existe aussi une fonction <em>via</em> <strong><code>ggplot2</code></strong> pour dessiner l’abre, mais il faut installer avant le package <strong><code>ggdendro</code></strong>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="11-Clustering-application.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdendro)</span>
<span id="cb158-2"><a href="11-Clustering-application.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdendrogram</span>(classif_socioprof_n, <span class="at">labels=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-119-1.svg" width="672" /></p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="11-Clustering-application.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdendrogram</span>(classif_socioprof_p, <span class="at">labels=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-119-2.svg" width="672" /></p>
<p>Il faut maintenant prendre une décision : où coupe-t-on l’arbre pour obtenir une partition de la population (ici nos IRIS), autrement dit combien de classes choisissons-nous ?<br />
On peut d’abord s’appuyer sur la forme du dendogramme : plus une “branche” est haute et plus on perd en distance ou ici (critère de Ward) en inertie interclasse<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, il faudra donc couper l’arbre au niveau de cette branche. Il faut également prendre en compte ce qui peut être le mieux pour l’analyse : si on aboutit à une classification en 2 classes, cela risque d’être peu intéressant à analyser, mais si on a une classification en 5 classes ou plus, cela va devenir compliqué à interpréter…<br />
Ici, dans les deux cas, il semble que choisir 2 classes soit très pertinent, mais on voit qu’on pourrait aussi choisir 3 ou 4 classes si l’on veut rentrer un peu plus dans le détail de l’analyse.</p>
<p>On peut également s’aider de représentations des sauts d’inertie du dendrogramme selon le nombre de classes qui peut être retenu, avec la fonction plot et en récupérant l’information sur l’inertie (<code>height</code>). Ci-dessous, trois types de graphes qui représentent exactement la même chose, mais selon des formes différentes : retenez celle que vous préférez et qui vous parle le plus !</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="11-Clustering-application.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co">#on stocke l&#39;attribut `$height` dans l&#39;objet `inertie` en triant les valeurs par ordre décroissant.</span></span>
<span id="cb160-2"><a href="11-Clustering-application.html#cb160-2" aria-hidden="true" tabindex="-1"></a>inertie_socioprof_n <span class="ot">&lt;-</span> <span class="fu">sort</span>(classif_socioprof_n<span class="sc">$</span>height, <span class="at">decreasing=</span><span class="cn">TRUE</span>)</span>
<span id="cb160-3"><a href="11-Clustering-application.html#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(inertie_socioprof_n, <span class="at">type=</span><span class="st">&quot;s&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Inertie&quot;</span>, </span>
<span id="cb160-4"><a href="11-Clustering-application.html#cb160-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>), <span class="at">xaxp =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">14</span>))</span>
<span id="cb160-5"><a href="11-Clustering-application.html#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), inertie_socioprof_n[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">4</span>)], </span>
<span id="cb160-6"><a href="11-Clustering-application.html#cb160-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;blue3&quot;</span>, <span class="st">&quot;brown3&quot;</span>, <span class="st">&quot;chartreuse3&quot;</span>), <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Plot_inertie-1.svg" width="672" /></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="11-Clustering-application.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(inertie_socioprof_n, type=&quot;h&quot;, xlab=&quot;Nombre de classes&quot;, ylab=&quot;Inertie&quot;, </span></span>
<span id="cb161-2"><a href="11-Clustering-application.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     xlim = c(1,15), xaxp = c(1,15,14))</span></span>
<span id="cb161-3"><a href="11-Clustering-application.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(inertie_socioprof_n, type=&quot;b&quot;, xlab=&quot;Nombre de classes&quot;, ylab=&quot;Inertie&quot;, </span></span>
<span id="cb161-4"><a href="11-Clustering-application.html#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="co">#     xlim = c(1,15), xaxp = c(1,15,14))</span></span>
<span id="cb161-5"><a href="11-Clustering-application.html#cb161-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-6"><a href="11-Clustering-application.html#cb161-6" aria-hidden="true" tabindex="-1"></a>inertie_socioprof_p <span class="ot">&lt;-</span> <span class="fu">sort</span>(classif_socioprof_p<span class="sc">$</span>height, <span class="at">decreasing=</span><span class="cn">TRUE</span>)</span>
<span id="cb161-7"><a href="11-Clustering-application.html#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(inertie_socioprof_p, <span class="at">type=</span><span class="st">&quot;s&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Inertie&quot;</span>, </span>
<span id="cb161-8"><a href="11-Clustering-application.html#cb161-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>), <span class="at">xaxp =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">14</span>))</span>
<span id="cb161-9"><a href="11-Clustering-application.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), inertie_socioprof_p[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)], </span>
<span id="cb161-10"><a href="11-Clustering-application.html#cb161-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;blue3&quot;</span>, <span class="st">&quot;brown3&quot;</span>, <span class="st">&quot;chartreuse3&quot;</span>), <span class="at">cex =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Plot_inertie-2.svg" width="672" /></p>
<p>Ou encore créer d’autres indicateurs plus rigoureux, comme la part de la perte d’inertie interclasse dans l’inertie totale (on parle aussi de “semi-partial R-squared”).</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="11-Clustering-application.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co">#on crée un indicateur de part en %</span></span>
<span id="cb162-2"><a href="11-Clustering-application.html#cb162-2" aria-hidden="true" tabindex="-1"></a>partinertie_socioprof_n <span class="ot">&lt;-</span> inertie_socioprof_n<span class="sc">/</span><span class="fu">sum</span>(inertie_socioprof_n)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb162-3"><a href="11-Clustering-application.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(partinertie_socioprof_n, <span class="at">type=</span><span class="st">&quot;b&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes&quot;</span>, </span>
<span id="cb162-4"><a href="11-Clustering-application.html#cb162-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Part dans l&#39;inertie totale en %&quot;</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>), <span class="at">xaxp =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">14</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Plot_inertie_bis-1.svg" width="672" /></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="11-Clustering-application.html#cb163-1" aria-hidden="true" tabindex="-1"></a>partinertie_socioprof_p <span class="ot">&lt;-</span> inertie_socioprof_p<span class="sc">/</span><span class="fu">sum</span>(inertie_socioprof_p)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb163-2"><a href="11-Clustering-application.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(partinertie_socioprof_p, <span class="at">type=</span><span class="st">&quot;b&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes&quot;</span>, </span>
<span id="cb163-3"><a href="11-Clustering-application.html#cb163-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Part dans l&#39;inertie totale en %&quot;</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>), <span class="at">xaxp =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">14</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Plot_inertie_bis-2.svg" width="672" />
On voit que les graphiques sont assez proches, qu’ils soient construits à partir de la mesure en valeur absolue ou en valeur relative.</p>
<p>Enfin, à savoir que des fonctions existent qui donnent une indication de la “meilleure” partition à choisir, mais attention le choix se fait aussi (et peut-être surtout) en fonction de l’analyse que l’on veut mener et de l’interprétation que l’on pourra faire des classes obtenues ! Pour l’exemple, je vous mets ci-dessous le code de Julien Larmarange pour tester ce type de fonctions ; la “meilleure” partition selon la perte d’inertie relative est représentée par un point noir et la seconde par un point gris. On voit qu’ici il est bien indiqué d’abord 2 classes, puis comme seconde “meilleure” partition 3 classes, ce qui correspond plutôt bien au premier graphique qu’on avait construit.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="11-Clustering-application.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb164-2"><a href="11-Clustering-application.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">url</span>(<span class="st">&quot;https://raw.githubusercontent.com/larmarange/JLutils/master/R/clustering.R&quot;</span>))</span>
<span id="cb164-3"><a href="11-Clustering-application.html#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="co">#On a choisit un maximum de 15 classes ici...</span></span>
<span id="cb164-4"><a href="11-Clustering-application.html#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="fu">best.cutree</span>(classif_socioprof_n, <span class="at">min=</span><span class="dv">2</span>, <span class="at">max=</span><span class="dv">15</span>, <span class="at">graph =</span> <span class="cn">TRUE</span>, </span>
<span id="cb164-5"><a href="11-Clustering-application.html#cb164-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlab =</span> <span class="st">&quot;Nombre de classes&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Inertie relative&quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Best_cutree-1.svg" width="672" /></p>
<pre><code>[1] 2</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="11-Clustering-application.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">best.cutree</span>(classif_socioprof_p, <span class="at">min=</span><span class="dv">2</span>, <span class="at">max=</span><span class="dv">15</span>, <span class="at">graph =</span> <span class="cn">TRUE</span>, </span>
<span id="cb166-2"><a href="11-Clustering-application.html#cb166-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlab =</span> <span class="st">&quot;Nombre de classes&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Inertie relative&quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Best_cutree-2.svg" width="672" /></p>
<pre><code>[1] 2</code></pre>
<p>Finalement, au vu de la forme du dendogramme et des graphes sur l’inertie (et de la fonction d’aide à la décision précédente), on choisit de prendre 3 classes pour une analyse plus fine, mais on va stocker également les résultats pour 2 classes pour les 2 analyses. On peut de nouveau visualiser le dendogramme en matérialisant les différents choix du nombre de classes.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="11-Clustering-application.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb168-2"><a href="11-Clustering-application.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(classif_socioprof_n, <span class="at">xlab=</span><span class="st">&quot;IRIS&quot;</span>,  <span class="at">main=</span><span class="st">&quot;Dendogramme&quot;</span>, <span class="at">label=</span><span class="cn">FALSE</span>)</span>
<span id="cb168-3"><a href="11-Clustering-application.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(classif_socioprof_n, <span class="at">k=</span><span class="dv">2</span>, <span class="at">border =</span> <span class="st">&#39;blue3&#39;</span>)</span>
<span id="cb168-4"><a href="11-Clustering-application.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(classif_socioprof_n, <span class="at">k=</span><span class="dv">3</span>, <span class="at">border =</span> <span class="st">&#39;brown3&#39;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Choix_cut-1.svg" width="672" /></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="11-Clustering-application.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut aussi couper l&#39;arbre vers la hauteur en ajoutant une ligne sur le graphe </span></span>
<span id="cb169-2"><a href="11-Clustering-application.html#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="co"># avec la fonction `abline`  et l&#39;option `h = 19` pour le graphe précédent :</span></span>
<span id="cb169-3"><a href="11-Clustering-application.html#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="co"># abline(h = 19, col = &#39;darkred&#39;)</span></span>
<span id="cb169-4"><a href="11-Clustering-application.html#cb169-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-5"><a href="11-Clustering-application.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb169-6"><a href="11-Clustering-application.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(classif_socioprof_p, <span class="at">xlab=</span><span class="st">&quot;IRIS&quot;</span>,  <span class="at">main=</span><span class="st">&quot;Dendogramme&quot;</span>, <span class="at">label=</span><span class="cn">FALSE</span>)</span>
<span id="cb169-7"><a href="11-Clustering-application.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(classif_socioprof_p, <span class="at">k=</span><span class="dv">2</span>, <span class="at">border =</span> <span class="st">&#39;blue3&#39;</span>)</span>
<span id="cb169-8"><a href="11-Clustering-application.html#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(classif_socioprof_p, <span class="at">k=</span><span class="dv">3</span>, <span class="at">border =</span> <span class="st">&#39;brown3&#39;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Choix_cut-2.svg" width="672" /></p>
<p>On peut également utiliser la fonction <code>color_branches()</code> du package <code>dendextend()</code>, mais il faut appeler de nouveau <code>ggplot2</code> après.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="11-Clustering-application.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut encore également utiliser la fonction `color_branches()` du package `dendextend()`</span></span>
<span id="cb170-2"><a href="11-Clustering-application.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mais il faut appeler de nouveau `ggplot2` après</span></span>
<span id="cb170-3"><a href="11-Clustering-application.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dendextend)</span>
<span id="cb170-4"><a href="11-Clustering-application.html#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb170-5"><a href="11-Clustering-application.html#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">color_branches</span>(classif_socioprof_n, <span class="at">k =</span> <span class="dv">3</span>), <span class="at">labels =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/dendogramme%20color%C3%83%C2%A9-1.svg" width="672" /></p>
<p>On choisit donc d’abord d’analyser nos deux clustering en 2 ou 3 classes : pour découper l’arbre et obtenir la partition souhaitée, on utilise la fonction <code>cutree()</code>, et on peut ensuite visualiser quelle zone infracommunale IRIS est dans quelle classe et le nombre d’IRIS par classe.<br />
On intègre ensuite la variable au tableau initial “clust” qui contient les variables utilisées, mais on pourra ensuite fusionner la table avec notre table initiale “RP” pour mener des analyses plus approfondies des classes, y compris avec des variables non utilisées dans le clustering.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="11-Clustering-application.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Découpage en k classes</span></span>
<span id="cb171-2"><a href="11-Clustering-application.html#cb171-2" aria-hidden="true" tabindex="-1"></a>classe3_soprof_n <span class="ot">&lt;-</span> <span class="fu">cutree</span>(classif_socioprof_n, <span class="at">k=</span><span class="dv">3</span>)</span>
<span id="cb171-3"><a href="11-Clustering-application.html#cb171-3" aria-hidden="true" tabindex="-1"></a>classe2_soprof_n <span class="ot">&lt;-</span> <span class="fu">cutree</span>(classif_socioprof_n, <span class="at">k=</span><span class="dv">2</span>)</span>
<span id="cb171-4"><a href="11-Clustering-application.html#cb171-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-5"><a href="11-Clustering-application.html#cb171-5" aria-hidden="true" tabindex="-1"></a>classe3_soprof_p <span class="ot">&lt;-</span> <span class="fu">cutree</span>(classif_socioprof_p, <span class="at">k=</span><span class="dv">3</span>)</span>
<span id="cb171-6"><a href="11-Clustering-application.html#cb171-6" aria-hidden="true" tabindex="-1"></a>classe2_soprof_p <span class="ot">&lt;-</span> <span class="fu">cutree</span>(classif_socioprof_p, <span class="at">k=</span><span class="dv">2</span>)</span>
<span id="cb171-7"><a href="11-Clustering-application.html#cb171-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-8"><a href="11-Clustering-application.html#cb171-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Liste des groupes</span></span>
<span id="cb171-9"><a href="11-Clustering-application.html#cb171-9" aria-hidden="true" tabindex="-1"></a><span class="co">#library(janitor)</span></span>
<span id="cb171-10"><a href="11-Clustering-application.html#cb171-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(classe3_soprof_n) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="aeclffvmih" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#aeclffvmih table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#aeclffvmih thead, #aeclffvmih tbody, #aeclffvmih tfoot, #aeclffvmih tr, #aeclffvmih td, #aeclffvmih th {
  border-style: none;
}

#aeclffvmih p {
  margin: 0;
  padding: 0;
}

#aeclffvmih .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aeclffvmih .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#aeclffvmih .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aeclffvmih .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aeclffvmih .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aeclffvmih .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aeclffvmih .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aeclffvmih .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aeclffvmih .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aeclffvmih .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aeclffvmih .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aeclffvmih .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aeclffvmih .gt_spanner_row {
  border-bottom-style: hidden;
}

#aeclffvmih .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#aeclffvmih .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aeclffvmih .gt_from_md > :first-child {
  margin-top: 0;
}

#aeclffvmih .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aeclffvmih .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aeclffvmih .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#aeclffvmih .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#aeclffvmih .gt_row_group_first td {
  border-top-width: 2px;
}

#aeclffvmih .gt_row_group_first th {
  border-top-width: 2px;
}

#aeclffvmih .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aeclffvmih .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#aeclffvmih .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#aeclffvmih .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aeclffvmih .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aeclffvmih .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aeclffvmih .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#aeclffvmih .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aeclffvmih .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aeclffvmih .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aeclffvmih .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aeclffvmih .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aeclffvmih .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aeclffvmih .gt_left {
  text-align: left;
}

#aeclffvmih .gt_center {
  text-align: center;
}

#aeclffvmih .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aeclffvmih .gt_font_normal {
  font-weight: normal;
}

#aeclffvmih .gt_font_bold {
  font-weight: bold;
}

#aeclffvmih .gt_font_italic {
  font-style: italic;
}

#aeclffvmih .gt_super {
  font-size: 65%;
}

#aeclffvmih .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#aeclffvmih .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#aeclffvmih .gt_indent_1 {
  text-indent: 5px;
}

#aeclffvmih .gt_indent_2 {
  text-indent: 10px;
}

#aeclffvmih .gt_indent_3 {
  text-indent: 15px;
}

#aeclffvmih .gt_indent_4 {
  text-indent: 20px;
}

#aeclffvmih .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="classe3_soprof_n">classe3_soprof_n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="classe3_soprof_n" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">43</td>
<td headers="percent" class="gt_row gt_right">22.6%</td></tr>
    <tr><td headers="classe3_soprof_n" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">125</td>
<td headers="percent" class="gt_row gt_right">65.8%</td></tr>
    <tr><td headers="classe3_soprof_n" class="gt_row gt_right">3</td>
<td headers="n" class="gt_row gt_right">22</td>
<td headers="percent" class="gt_row gt_right">11.6%</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="11-Clustering-application.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(classe2_soprof_n) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="bhotsrrrbf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bhotsrrrbf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bhotsrrrbf thead, #bhotsrrrbf tbody, #bhotsrrrbf tfoot, #bhotsrrrbf tr, #bhotsrrrbf td, #bhotsrrrbf th {
  border-style: none;
}

#bhotsrrrbf p {
  margin: 0;
  padding: 0;
}

#bhotsrrrbf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bhotsrrrbf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bhotsrrrbf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bhotsrrrbf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bhotsrrrbf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhotsrrrbf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhotsrrrbf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhotsrrrbf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bhotsrrrbf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bhotsrrrbf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bhotsrrrbf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bhotsrrrbf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bhotsrrrbf .gt_spanner_row {
  border-bottom-style: hidden;
}

#bhotsrrrbf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bhotsrrrbf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bhotsrrrbf .gt_from_md > :first-child {
  margin-top: 0;
}

#bhotsrrrbf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bhotsrrrbf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bhotsrrrbf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bhotsrrrbf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bhotsrrrbf .gt_row_group_first td {
  border-top-width: 2px;
}

#bhotsrrrbf .gt_row_group_first th {
  border-top-width: 2px;
}

#bhotsrrrbf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhotsrrrbf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bhotsrrrbf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bhotsrrrbf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhotsrrrbf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhotsrrrbf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bhotsrrrbf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bhotsrrrbf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bhotsrrrbf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhotsrrrbf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhotsrrrbf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhotsrrrbf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhotsrrrbf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhotsrrrbf .gt_left {
  text-align: left;
}

#bhotsrrrbf .gt_center {
  text-align: center;
}

#bhotsrrrbf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bhotsrrrbf .gt_font_normal {
  font-weight: normal;
}

#bhotsrrrbf .gt_font_bold {
  font-weight: bold;
}

#bhotsrrrbf .gt_font_italic {
  font-style: italic;
}

#bhotsrrrbf .gt_super {
  font-size: 65%;
}

#bhotsrrrbf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bhotsrrrbf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bhotsrrrbf .gt_indent_1 {
  text-indent: 5px;
}

#bhotsrrrbf .gt_indent_2 {
  text-indent: 10px;
}

#bhotsrrrbf .gt_indent_3 {
  text-indent: 15px;
}

#bhotsrrrbf .gt_indent_4 {
  text-indent: 20px;
}

#bhotsrrrbf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="classe2_soprof_n">classe2_soprof_n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="classe2_soprof_n" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">43</td>
<td headers="percent" class="gt_row gt_right">22.6%</td></tr>
    <tr><td headers="classe2_soprof_n" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">147</td>
<td headers="percent" class="gt_row gt_right">77.4%</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="11-Clustering-application.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(classe3_soprof_p) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="rzzvnnyzwd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rzzvnnyzwd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rzzvnnyzwd thead, #rzzvnnyzwd tbody, #rzzvnnyzwd tfoot, #rzzvnnyzwd tr, #rzzvnnyzwd td, #rzzvnnyzwd th {
  border-style: none;
}

#rzzvnnyzwd p {
  margin: 0;
  padding: 0;
}

#rzzvnnyzwd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rzzvnnyzwd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rzzvnnyzwd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rzzvnnyzwd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rzzvnnyzwd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rzzvnnyzwd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rzzvnnyzwd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rzzvnnyzwd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rzzvnnyzwd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rzzvnnyzwd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rzzvnnyzwd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rzzvnnyzwd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rzzvnnyzwd .gt_spanner_row {
  border-bottom-style: hidden;
}

#rzzvnnyzwd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rzzvnnyzwd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rzzvnnyzwd .gt_from_md > :first-child {
  margin-top: 0;
}

#rzzvnnyzwd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rzzvnnyzwd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rzzvnnyzwd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rzzvnnyzwd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rzzvnnyzwd .gt_row_group_first td {
  border-top-width: 2px;
}

#rzzvnnyzwd .gt_row_group_first th {
  border-top-width: 2px;
}

#rzzvnnyzwd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rzzvnnyzwd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rzzvnnyzwd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rzzvnnyzwd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rzzvnnyzwd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rzzvnnyzwd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rzzvnnyzwd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rzzvnnyzwd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rzzvnnyzwd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rzzvnnyzwd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rzzvnnyzwd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rzzvnnyzwd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rzzvnnyzwd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rzzvnnyzwd .gt_left {
  text-align: left;
}

#rzzvnnyzwd .gt_center {
  text-align: center;
}

#rzzvnnyzwd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rzzvnnyzwd .gt_font_normal {
  font-weight: normal;
}

#rzzvnnyzwd .gt_font_bold {
  font-weight: bold;
}

#rzzvnnyzwd .gt_font_italic {
  font-style: italic;
}

#rzzvnnyzwd .gt_super {
  font-size: 65%;
}

#rzzvnnyzwd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rzzvnnyzwd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rzzvnnyzwd .gt_indent_1 {
  text-indent: 5px;
}

#rzzvnnyzwd .gt_indent_2 {
  text-indent: 10px;
}

#rzzvnnyzwd .gt_indent_3 {
  text-indent: 15px;
}

#rzzvnnyzwd .gt_indent_4 {
  text-indent: 20px;
}

#rzzvnnyzwd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="classe3_soprof_p">classe3_soprof_p</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="classe3_soprof_p" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">42</td>
<td headers="percent" class="gt_row gt_right">22.1%</td></tr>
    <tr><td headers="classe3_soprof_p" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">120</td>
<td headers="percent" class="gt_row gt_right">63.2%</td></tr>
    <tr><td headers="classe3_soprof_p" class="gt_row gt_right">3</td>
<td headers="n" class="gt_row gt_right">28</td>
<td headers="percent" class="gt_row gt_right">14.7%</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="11-Clustering-application.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(classe2_soprof_p) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="yosfxzjxtf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yosfxzjxtf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#yosfxzjxtf thead, #yosfxzjxtf tbody, #yosfxzjxtf tfoot, #yosfxzjxtf tr, #yosfxzjxtf td, #yosfxzjxtf th {
  border-style: none;
}

#yosfxzjxtf p {
  margin: 0;
  padding: 0;
}

#yosfxzjxtf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yosfxzjxtf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#yosfxzjxtf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yosfxzjxtf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yosfxzjxtf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yosfxzjxtf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yosfxzjxtf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yosfxzjxtf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yosfxzjxtf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yosfxzjxtf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yosfxzjxtf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yosfxzjxtf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yosfxzjxtf .gt_spanner_row {
  border-bottom-style: hidden;
}

#yosfxzjxtf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#yosfxzjxtf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yosfxzjxtf .gt_from_md > :first-child {
  margin-top: 0;
}

#yosfxzjxtf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yosfxzjxtf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yosfxzjxtf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#yosfxzjxtf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#yosfxzjxtf .gt_row_group_first td {
  border-top-width: 2px;
}

#yosfxzjxtf .gt_row_group_first th {
  border-top-width: 2px;
}

#yosfxzjxtf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yosfxzjxtf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#yosfxzjxtf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#yosfxzjxtf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yosfxzjxtf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yosfxzjxtf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yosfxzjxtf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#yosfxzjxtf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yosfxzjxtf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yosfxzjxtf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yosfxzjxtf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yosfxzjxtf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yosfxzjxtf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yosfxzjxtf .gt_left {
  text-align: left;
}

#yosfxzjxtf .gt_center {
  text-align: center;
}

#yosfxzjxtf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yosfxzjxtf .gt_font_normal {
  font-weight: normal;
}

#yosfxzjxtf .gt_font_bold {
  font-weight: bold;
}

#yosfxzjxtf .gt_font_italic {
  font-style: italic;
}

#yosfxzjxtf .gt_super {
  font-size: 65%;
}

#yosfxzjxtf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#yosfxzjxtf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#yosfxzjxtf .gt_indent_1 {
  text-indent: 5px;
}

#yosfxzjxtf .gt_indent_2 {
  text-indent: 10px;
}

#yosfxzjxtf .gt_indent_3 {
  text-indent: 15px;
}

#yosfxzjxtf .gt_indent_4 {
  text-indent: 20px;
}

#yosfxzjxtf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="classe2_soprof_p">classe2_soprof_p</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="classe2_soprof_p" class="gt_row gt_right">1</td>
<td headers="n" class="gt_row gt_right">162</td>
<td headers="percent" class="gt_row gt_right">85.3%</td></tr>
    <tr><td headers="classe2_soprof_p" class="gt_row gt_right">2</td>
<td headers="n" class="gt_row gt_right">28</td>
<td headers="percent" class="gt_row gt_right">14.7%</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="11-Clustering-application.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(classe3_soprof_p) </span></code></pre></div>
<pre><code>   Folie Méricourt 1    Folie Méricourt 9   Folie Méricourt 10 
                   1                    1                    1 
  Folie Méricourt 13           Roquette 1           Roquette 7 
                   1                    1                    1 
         Roquette 16          Roquette 19          Roquette 20 
                   1                    1                    1 
            Picpus 1             Picpus 2             Picpus 3 
                   1                    1                    1 
            Picpus 4             Picpus 6            Picpus 19 
                   1                    1                    1 
           Picpus 22              Bercy 4              Bercy 5 
                   1                    1                    1 
     Quinze-Vingts 1      Quinze-Vingts 2         Belleville 1 
                   1                    1                    1 
        Belleville 7         Belleville 9        Belleville 10 
                   1                    1                    1 
       Belleville 11        Belleville 12        Belleville 13 
                   1                    1                    1 
     Saint-Fargeau 5      Saint-Fargeau 8     Saint-Fargeau 10 
                   1                    1                    1 
    Saint-Fargeau 11     Saint-Fargeau 12     Saint-Fargeau 15 
                   1                    1                    1 
    Saint-Fargeau 16      Père Lachaise 7      Père Lachaise 9 
                   1                    1                    1 
    Père Lachaise 11     Père Lachaise 16           Charonne 3 
                   1                    1                    1 
         Charonne 12          Charonne 23          Charonne 26 
                   1                    1                    1 
   Folie Méricourt 2    Folie Méricourt 3    Folie Méricourt 4 
                   2                    2                    2 
   Folie Méricourt 5    Folie Méricourt 6    Folie Méricourt 7 
                   2                    2                    2 
   Folie Méricourt 8   Folie Méricourt 14   Folie Méricourt 15 
                   2                    2                    2 
    Saint-Ambroise 1     Saint-Ambroise 2     Saint-Ambroise 3 
                   2                    2                    2 
    Saint-Ambroise 4     Saint-Ambroise 5     Saint-Ambroise 6 
                   2                    2                    2 
    Saint-Ambroise 7     Saint-Ambroise 8     Saint-Ambroise 9 
                   2                    2                    2 
   Saint-Ambroise 10    Saint-Ambroise 11    Saint-Ambroise 12 
                   2                    2                    2 
   Saint-Ambroise 13    Saint-Ambroise 14           Roquette 2 
                   2                    2                    2 
          Roquette 4           Roquette 5           Roquette 6 
                   2                    2                    2 
          Roquette 8           Roquette 9          Roquette 10 
                   2                    2                    2 
         Roquette 11          Roquette 12          Roquette 13 
                   2                    2                    2 
         Roquette 14          Roquette 15          Roquette 17 
                   2                    2                    2 
         Roquette 18          Roquette 21  Sainte-Marguerite 1 
                   2                    2                    2 
 Sainte-Marguerite 2  Sainte-Marguerite 3  Sainte-Marguerite 4 
                   2                    2                    2 
 Sainte-Marguerite 5  Sainte-Marguerite 6  Sainte-Marguerite 7 
                   2                    2                    2 
 Sainte-Marguerite 8  Sainte-Marguerite 9 Sainte-Marguerite 10 
                   2                    2                    2 
Sainte-Marguerite 11 Sainte-Marguerite 12 Sainte-Marguerite 13 
                   2                    2                    2 
           Bel-Air 2            Bel-Air 3            Bel-Air 4 
                   2                    2                    2 
           Bel-Air 5            Bel-Air 6            Bel-Air 7 
                   2                    2                    2 
           Bel-Air 8            Bel-Air 9           Bel-Air 12 
                   2                    2                    2 
          Bel-Air 13           Bel-Air 14             Picpus 5 
                   2                    2                    2 
            Picpus 8            Picpus 10            Picpus 11 
                   2                    2                    2 
           Picpus 12            Picpus 13            Picpus 14 
                   2                    2                    2 
           Picpus 15            Picpus 16            Picpus 17 
                   2                    2                    2 
           Picpus 18            Picpus 20            Picpus 21 
                   2                    2                    2 
           Picpus 23            Picpus 24              Bercy 1 
                   2                    2                    2 
             Bercy 2              Bercy 3              Bercy 7 
                   2                    2                    2 
     Quinze-Vingts 3      Quinze-Vingts 4      Quinze-Vingts 5 
                   2                    2                    2 
     Quinze-Vingts 6      Quinze-Vingts 7      Quinze-Vingts 8 
                   2                    2                    2 
     Quinze-Vingts 9     Quinze-Vingts 10     Quinze-Vingts 13 
                   2                    2                    2 
        Belleville 2         Belleville 4         Belleville 6 
                   2                    2                    2 
       Belleville 14      Saint-Fargeau 2      Saint-Fargeau 6 
                   2                    2                    2 
     Saint-Fargeau 7      Saint-Fargeau 9     Saint-Fargeau 14 
                   2                    2                    2 
     Père Lachaise 1      Père Lachaise 2      Père Lachaise 3 
                   2                    2                    2 
     Père Lachaise 4      Père Lachaise 5     Père Lachaise 12 
                   2                    2                    2 
    Père Lachaise 13     Père Lachaise 14     Père Lachaise 15 
                   2                    2                    2 
          Charonne 2           Charonne 4           Charonne 5 
                   2                    2                    2 
          Charonne 6          Charonne 13          Charonne 14 
                   2                    2                    2 
         Charonne 15          Charonne 16          Charonne 17 
                   2                    2                    2 
         Charonne 18          Charonne 24          Charonne 25 
                   2                    2                    2 
  Folie Méricourt 11   Folie Méricourt 12           Roquette 3 
                   3                    3                    3 
           Bel-Air 1           Bel-Air 10           Bel-Air 11 
                   3                    3                    3 
            Picpus 9     Quinze-Vingts 12         Belleville 3 
                   3                    3                    3 
        Belleville 5         Belleville 8      Saint-Fargeau 1 
                   3                    3                    3 
     Saint-Fargeau 3      Saint-Fargeau 4     Saint-Fargeau 13 
                   3                    3                    3 
     Père Lachaise 6      Père Lachaise 8     Père Lachaise 10 
                   3                    3                    3 
          Charonne 1           Charonne 7           Charonne 8 
                   3                    3                    3 
          Charonne 9          Charonne 10          Charonne 11 
                   3                    3                    3 
         Charonne 19          Charonne 20          Charonne 21 
                   3                    3                    3 
         Charonne 22 
                   3 </code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="11-Clustering-application.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Ajout des variables de classe dans la table initiale de clustering</span></span>
<span id="cb177-2"><a href="11-Clustering-application.html#cb177-2" aria-hidden="true" tabindex="-1"></a>clust_socioprof_n_cl <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(clust, <span class="at">classe3_soprof_n=</span><span class="fu">as.factor</span>(classe3_soprof_n),</span>
<span id="cb177-3"><a href="11-Clustering-application.html#cb177-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">classe2_soprof_n=</span><span class="fu">as.factor</span>(classe2_soprof_n))</span>
<span id="cb177-4"><a href="11-Clustering-application.html#cb177-4" aria-hidden="true" tabindex="-1"></a>clust_socioprof_p_cl <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(clust, <span class="at">classe3_soprof_p=</span><span class="fu">as.factor</span>(classe3_soprof_p),</span>
<span id="cb177-5"><a href="11-Clustering-application.html#cb177-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">classe2_soprof_p=</span><span class="fu">as.factor</span>(classe2_soprof_p))</span></code></pre></div>
</div>
<div id="visualisation-sur-la-carte-de-la-commune" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Visualisation sur la carte de la commune<a href="11-Clustering-application.html#visualisation-sur-la-carte-de-la-commune" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Enfin, on peut visualiser sur la carte de la commune - ici 3 arrondissements de Paris - les trois classes construites et choisies.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="11-Clustering-application.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geojsonsf)</span>
<span id="cb178-2"><a href="11-Clustering-application.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb178-3"><a href="11-Clustering-application.html#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapsf)</span>
<span id="cb178-4"><a href="11-Clustering-application.html#cb178-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-5"><a href="11-Clustering-application.html#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co"># on charge le fonds de carte des IRIS</span></span>
<span id="cb178-6"><a href="11-Clustering-application.html#cb178-6" aria-hidden="true" tabindex="-1"></a>map_iris <span class="ot">&lt;-</span> <span class="fu">geojson_sf</span>(<span class="st">&quot;data/map_iris.geojson&quot;</span>) </span>
<span id="cb178-7"><a href="11-Clustering-application.html#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="co"># on charge le fonds de carte des arrdts de Paris</span></span>
<span id="cb178-8"><a href="11-Clustering-application.html#cb178-8" aria-hidden="true" tabindex="-1"></a>map_arrdt <span class="ot">&lt;-</span> <span class="fu">geojson_sf</span>(<span class="st">&quot;data/arrondissements.geojson&quot;</span>) </span>
<span id="cb178-9"><a href="11-Clustering-application.html#cb178-9" aria-hidden="true" tabindex="-1"></a>map_iris <span class="ot">&lt;-</span> map_iris <span class="sc">%&gt;%</span> </span>
<span id="cb178-10"><a href="11-Clustering-application.html#cb178-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(insee_com <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb178-11"><a href="11-Clustering-application.html#cb178-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">iris_code =</span> <span class="fu">as.character</span>(code_iris)) <span class="sc">%&gt;%</span> </span>
<span id="cb178-12"><a href="11-Clustering-application.html#cb178-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">IRIS =</span> iris_code) <span class="sc">%&gt;%</span></span>
<span id="cb178-13"><a href="11-Clustering-application.html#cb178-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IRIS, nom_iris, nom_com, geometry)</span>
<span id="cb178-14"><a href="11-Clustering-application.html#cb178-14" aria-hidden="true" tabindex="-1"></a>map_arrdt <span class="ot">&lt;-</span> map_arrdt <span class="sc">%&gt;%</span> </span>
<span id="cb178-15"><a href="11-Clustering-application.html#cb178-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(c_arinsee <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;75111&quot;</span>, <span class="st">&quot;75112&quot;</span>, <span class="st">&quot;75120&quot;</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb178-16"><a href="11-Clustering-application.html#cb178-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">c_arinsee =</span> <span class="fu">as.character</span>(c_arinsee)) <span class="sc">%&gt;%</span> </span>
<span id="cb178-17"><a href="11-Clustering-application.html#cb178-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(c_arinsee, geometry)</span>
<span id="cb178-18"><a href="11-Clustering-application.html#cb178-18" aria-hidden="true" tabindex="-1"></a>coord <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(<span class="fu">st_centroid</span>(map_iris))</span>
<span id="cb178-19"><a href="11-Clustering-application.html#cb178-19" aria-hidden="true" tabindex="-1"></a>map_iris <span class="ot">&lt;-</span> <span class="fu">cbind</span>(map_iris, coord)</span>
<span id="cb178-20"><a href="11-Clustering-application.html#cb178-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-21"><a href="11-Clustering-application.html#cb178-21" aria-hidden="true" tabindex="-1"></a>clust_map_socioprof_n <span class="ot">&lt;-</span> clust_socioprof_n_cl <span class="sc">%&gt;%</span></span>
<span id="cb178-22"><a href="11-Clustering-application.html#cb178-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IRIS, classe3_soprof_n) <span class="sc">%&gt;%</span></span>
<span id="cb178-23"><a href="11-Clustering-application.html#cb178-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(map_iris)</span>
<span id="cb178-24"><a href="11-Clustering-application.html#cb178-24" aria-hidden="true" tabindex="-1"></a>clust_map_socioprof_n <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(clust_map_socioprof_n)</span>
<span id="cb178-25"><a href="11-Clustering-application.html#cb178-25" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_theme</span>(<span class="st">&quot;agolalight&quot;</span>)</span>
<span id="cb178-26"><a href="11-Clustering-application.html#cb178-26" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(clust_map_socioprof_n, <span class="at">type=</span><span class="st">&quot;typo&quot;</span>, <span class="at">var=</span><span class="st">&quot;classe3_soprof_n&quot;</span>, <span class="at">col =</span> <span class="st">&quot;lightyellow&quot;</span>, </span>
<span id="cb178-27"><a href="11-Clustering-application.html#cb178-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">border=</span><span class="st">&quot;gray80&quot;</span>, <span class="at">lwd=</span><span class="fl">0.4</span>, <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">&quot;aquamarine3&quot;</span>, <span class="st">&quot;coral&quot;</span>, <span class="st">&quot;skyblue3&quot;</span>),</span>
<span id="cb178-28"><a href="11-Clustering-application.html#cb178-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">leg_pos =</span> <span class="st">&quot;bottomleft&quot;</span>, <span class="at">leg_title=</span><span class="st">&quot;Cluster&quot;</span>)</span>
<span id="cb178-29"><a href="11-Clustering-application.html#cb178-29" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(map_arrdt,  <span class="at">type =</span> <span class="st">&quot;base&quot;</span>, <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border=</span><span class="st">&quot;gray41&quot;</span>,<span class="at">lwd=</span><span class="dv">1</span>,</span>
<span id="cb178-30"><a href="11-Clustering-application.html#cb178-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb178-31"><a href="11-Clustering-application.html#cb178-31" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="st">&quot;Quartiers de l&#39;Est parisien découpés selon le cluster obtenu&quot;</span>, </span>
<span id="cb178-32"><a href="11-Clustering-application.html#cb178-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits=</span><span class="st">&quot; &quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/carto_clust-1.svg" width="672" /></p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="11-Clustering-application.html#cb179-1" aria-hidden="true" tabindex="-1"></a>clust_map_socioprof_p <span class="ot">&lt;-</span> clust_socioprof_p_cl <span class="sc">%&gt;%</span></span>
<span id="cb179-2"><a href="11-Clustering-application.html#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(IRIS, classe3_soprof_p) <span class="sc">%&gt;%</span></span>
<span id="cb179-3"><a href="11-Clustering-application.html#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(map_iris)</span>
<span id="cb179-4"><a href="11-Clustering-application.html#cb179-4" aria-hidden="true" tabindex="-1"></a>clust_map_socioprof_p <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(clust_map_socioprof_p)</span>
<span id="cb179-5"><a href="11-Clustering-application.html#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_theme</span>(<span class="st">&quot;agolalight&quot;</span>)</span>
<span id="cb179-6"><a href="11-Clustering-application.html#cb179-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(clust_map_socioprof_p, <span class="at">type=</span><span class="st">&quot;typo&quot;</span>, <span class="at">var=</span><span class="st">&quot;classe3_soprof_p&quot;</span>, <span class="at">col =</span> <span class="st">&quot;lightyellow&quot;</span>, </span>
<span id="cb179-7"><a href="11-Clustering-application.html#cb179-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">border=</span><span class="st">&quot;gray80&quot;</span>, <span class="at">lwd=</span><span class="fl">0.4</span>, <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">&quot;aquamarine3&quot;</span>, <span class="st">&quot;coral&quot;</span>, <span class="st">&quot;skyblue3&quot;</span>, <span class="st">&quot;hotpink3&quot;</span>, <span class="st">&quot;wheat4&quot;</span>),</span>
<span id="cb179-8"><a href="11-Clustering-application.html#cb179-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">leg_pos =</span> <span class="st">&quot;bottomleft&quot;</span>, <span class="at">leg_title=</span><span class="st">&quot;Cluster&quot;</span>)</span>
<span id="cb179-9"><a href="11-Clustering-application.html#cb179-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_map</span>(map_arrdt,  <span class="at">type =</span> <span class="st">&quot;base&quot;</span>, <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">border=</span><span class="st">&quot;gray41&quot;</span>,<span class="at">lwd=</span><span class="dv">1</span>,</span>
<span id="cb179-10"><a href="11-Clustering-application.html#cb179-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb179-11"><a href="11-Clustering-application.html#cb179-11" aria-hidden="true" tabindex="-1"></a><span class="fu">mf_layout</span>(<span class="at">title =</span> <span class="st">&quot;Quartiers de l&#39;Est parisien découpés selon le cluster obtenu&quot;</span>, </span>
<span id="cb179-12"><a href="11-Clustering-application.html#cb179-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">credits=</span><span class="st">&quot; &quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/carto_clust-2.svg" width="672" />
On voit que les 2 cartes sont très proches ; mais il nous reste à comprendre les classes, c’est-à-dire à les interpréter, à partir des variables mises en <em>input</em> dans un premier temps.</p>
</div>
<div id="interprétation" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Interprétation<a href="11-Clustering-application.html#interprétation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Il faut maintenant comprendre la partition obtenue et interpréter nos 3 classes en les décrivant principalement ici à partir des variables utilisées dans le clustering. On peut pour cela utiliser le package <code>FactoMiner</code> qui permet avec la fonction <code>catdes</code> de sortir des résultats sur, d’une part, les liens les plus significatifs entre les variables actives de la CAH et la variable globale de cluster/classes, et, d’autre part de manière plus précise, sur les liens les plus significatifs entre les variables et chacune des classes.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="11-Clustering-application.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb180-2"><a href="11-Clustering-application.html#cb180-2" aria-hidden="true" tabindex="-1"></a>desc_cl_soprof_n <span class="ot">&lt;-</span> <span class="fu">catdes</span>(clust_socioprof_n_cl[, <span class="fu">c</span>(<span class="st">&quot;nb_Bac&quot;</span>,  <span class="st">&quot;nb_Bac.5ou.&quot;</span>,</span>
<span id="cb180-3"><a href="11-Clustering-application.html#cb180-3" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;nb_Peu_pas_dipl&quot;</span>,</span>
<span id="cb180-4"><a href="11-Clustering-application.html#cb180-4" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;nb_chômeurs&quot;</span>, <span class="st">&quot;nb_CDI&quot;</span>,</span>
<span id="cb180-5"><a href="11-Clustering-application.html#cb180-5" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;nb_inactifs&quot;</span>, <span class="st">&quot;nb_EDDouautres&quot;</span>,</span>
<span id="cb180-6"><a href="11-Clustering-application.html#cb180-6" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;nb_independants&quot;</span>,<span class="st">&quot;nb_immi&quot;</span>, </span>
<span id="cb180-7"><a href="11-Clustering-application.html#cb180-7" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;classe3_soprof_n&quot;</span>)], </span>
<span id="cb180-8"><a href="11-Clustering-application.html#cb180-8" aria-hidden="true" tabindex="-1"></a>                           <span class="at">num.var =</span> <span class="dv">10</span>)</span>
<span id="cb180-9"><a href="11-Clustering-application.html#cb180-9" aria-hidden="true" tabindex="-1"></a>desc_cl_soprof_n</span></code></pre></div>
<pre><code>
Link between the cluster variable and the quantitative variables
================================================================
                     Eta2      P-value
nb_Peu_pas_dipl 0.5381238 4.296779e-32
nb_Bac.5ou.     0.5315487 1.611105e-31
nb_CDI          0.4876232 7.024448e-28
nb_inactifs     0.4681841 2.283942e-26
nb_immi         0.4666958 2.965938e-26
nb_Bac          0.4320154 1.072676e-23
nb_independants 0.4003104 1.722386e-21
nb_chômeurs     0.3698221 1.777484e-19
nb_EDDouautres  0.2273108 3.376400e-11

Description of each cluster by quantitative variables
=====================================================
$`1`
                  v.test Mean in category Overall mean sd in category
nb_CDI          9.582799         897.6977     636.7053      176.24646
nb_inactifs     8.949150         504.6047     352.3053      120.48760
nb_Bac.5ou.     8.511953         705.6279     477.7211      154.33790
nb_Bac          8.282105         254.6047     181.9158       59.22607
nb_independants 7.486181         197.6977     138.7579       42.28834
nb_chômeurs     6.857757         151.9535     111.2895       42.01658
nb_EDDouautres  6.542592         153.1860     112.0421       45.77562
nb_immi         5.246672         362.5814     281.3368       99.25120
nb_Peu_pas_dipl 4.671264         438.8605     339.6421      138.42210
                Overall sd      p.value
nb_CDI           202.50790 9.445010e-22
nb_inactifs      126.53854 3.582287e-19
nb_Bac.5ou.      199.08322 1.710284e-17
nb_Bac            65.25798 1.210169e-16
nb_independants   58.54026 7.090682e-14
nb_chômeurs       44.08945 6.995035e-12
nb_EDDouautres    46.75871 6.046178e-11
nb_immi          115.13750 1.548713e-07
nb_Peu_pas_dipl  157.92979 2.993514e-06

$`2`
                   v.test Mean in category Overall mean sd in category
nb_independants -2.685421          130.512     138.7579       48.36240
nb_Bac.5ou.     -2.883695          447.608     477.7211      131.88388
nb_EDDouautres  -4.645655          100.648     112.0421       37.12686
nb_CDI          -7.567696          556.320     636.7053      120.62601
nb_chômeurs     -8.306346           92.080     111.2895       31.97639
nb_Bac          -8.601800          152.472     181.9158       42.36991
nb_inactifs     -8.628958          295.032     352.3053       83.62162
nb_immi         -9.087265          226.456     281.3368       73.63222
nb_Peu_pas_dipl -9.415144          261.648     339.6421       89.25418
                Overall sd      p.value
nb_independants   58.54026 7.243855e-03
nb_Bac.5ou.      199.08322 3.930389e-03
nb_EDDouautres    46.75871 3.389998e-06
nb_CDI           202.50790 3.799008e-14
nb_chômeurs       44.08945 9.869379e-17
nb_Bac            65.25798 7.847555e-18
nb_inactifs      126.53854 6.191351e-18
nb_immi          115.13750 1.015616e-19
nb_Peu_pas_dipl  157.92979 4.724363e-21

$`3`
                   v.test Mean in category Overall mean sd in category
nb_Peu_pas_dipl  7.850713        588.86364     339.6421      129.52862
nb_immi          6.612083        434.36364     281.3368      104.87419
nb_chômeurs      3.347329        140.95455     111.2895       36.32239
nb_independants -5.808498         70.40909     138.7579       31.04931
nb_Bac.5ou.     -6.855982        203.36364     477.7211      122.33098
                Overall sd      p.value
nb_Peu_pas_dipl  157.92979 4.136789e-15
nb_immi          115.13750 3.789501e-11
nb_chômeurs       44.08945 8.159442e-04
nb_independants   58.54026 6.303576e-09
nb_Bac.5ou.      199.08322 7.082440e-12</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="11-Clustering-application.html#cb182-1" aria-hidden="true" tabindex="-1"></a>clust_socioprof_p_cl <span class="ot">&lt;-</span> clust_socioprof_p_cl <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="11-Clustering-application.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_Bac =</span> (nb_Bac <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-3"><a href="11-Clustering-application.html#cb182-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_Bac5ouplus =</span> (nb_Bac<span class="fl">.5</span>ou.<span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-4"><a href="11-Clustering-application.html#cb182-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_Peu_pas_dipl =</span> (nb_Peu_pas_dipl <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-5"><a href="11-Clustering-application.html#cb182-5" aria-hidden="true" tabindex="-1"></a>         pct_chômeurs <span class="ot">=</span> (nb_chômeurs <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-6"><a href="11-Clustering-application.html#cb182-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_CDI =</span> (nb_CDI <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-7"><a href="11-Clustering-application.html#cb182-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_inactifs =</span> (nb_inactifs <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-8"><a href="11-Clustering-application.html#cb182-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_EDDouautres =</span> (nb_EDDouautres <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-9"><a href="11-Clustering-application.html#cb182-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_independants =</span> (nb_independants <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb182-10"><a href="11-Clustering-application.html#cb182-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_immi =</span> (nb_immi <span class="sc">/</span> nb_hab)<span class="sc">*</span><span class="dv">100</span>) </span>
<span id="cb182-11"><a href="11-Clustering-application.html#cb182-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-12"><a href="11-Clustering-application.html#cb182-12" aria-hidden="true" tabindex="-1"></a>desc_cl_soprof_p <span class="ot">&lt;-</span> <span class="fu">catdes</span>(clust_socioprof_p_cl[, <span class="fu">c</span>(<span class="st">&quot;pct_Bac&quot;</span>, <span class="st">&quot;pct_Bac5ouplus&quot;</span>, </span>
<span id="cb182-13"><a href="11-Clustering-application.html#cb182-13" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;pct_Peu_pas_dipl&quot;</span>, <span class="st">&quot;pct_chômeurs&quot;</span>, </span>
<span id="cb182-14"><a href="11-Clustering-application.html#cb182-14" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;pct_CDI&quot;</span>, <span class="st">&quot;pct_inactifs&quot;</span>,</span>
<span id="cb182-15"><a href="11-Clustering-application.html#cb182-15" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;pct_EDDouautres&quot;</span>, <span class="st">&quot;pct_independants&quot;</span>,</span>
<span id="cb182-16"><a href="11-Clustering-application.html#cb182-16" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">&quot;pct_immi&quot;</span>, <span class="st">&quot;classe3_soprof_p&quot;</span>)],</span>
<span id="cb182-17"><a href="11-Clustering-application.html#cb182-17" aria-hidden="true" tabindex="-1"></a>                           <span class="at">num.var =</span> <span class="dv">10</span>)</span>
<span id="cb182-18"><a href="11-Clustering-application.html#cb182-18" aria-hidden="true" tabindex="-1"></a>desc_cl_soprof_p</span></code></pre></div>
<pre><code>
Link between the cluster variable and the quantitative variables
================================================================
                       Eta2      P-value
pct_Peu_pas_dipl 0.77846082 6.304150e-62
pct_Bac5ouplus   0.71375149 1.605063e-51
pct_immi         0.70646394 1.684019e-50
pct_independants 0.33030084 5.245140e-17
pct_chômeurs     0.32906279 6.233843e-17
pct_Bac          0.15189749 2.041364e-07
pct_inactifs     0.13898368 8.386181e-07
pct_CDI          0.06624166 1.647878e-03
pct_EDDouautres  0.03777463 2.731373e-02

Description of each cluster by quantitative variables
=====================================================
$`1`
                    v.test Mean in category Overall mean sd in category
pct_immi          3.027004        24.507279     21.41919       4.645990
pct_Peu_pas_dipl  2.289488        29.481383     25.95872       4.662718
pct_independants -2.060313         9.402845     10.39387       2.320006
pct_CDI          -2.060744        46.127625     47.77671       4.489556
pct_Bac5ouplus   -3.268502        30.776809     35.61214       4.521941
                 Overall sd     p.value
pct_immi           7.471382 0.002469905
pct_Peu_pas_dipl  11.268278 0.022051021
pct_independants   3.522712 0.039368655
pct_CDI            5.860615 0.039327491
pct_Bac5ouplus    10.834337 0.001081183

$`2`
                     v.test Mean in category Overall mean sd in category
pct_Bac5ouplus    10.266383        41.791556    35.612143       6.094537
pct_independants   6.903046        11.744841    10.393872       3.201152
pct_CDI            3.498480        48.915777    47.776708       6.134204
pct_Bac           -3.011595        13.182659    13.626499       2.427248
pct_inactifs      -4.005780        25.143961    26.456884       5.180629
pct_chômeurs      -5.483185         7.622043     8.381789       2.183874
pct_immi         -10.102537        17.225865    21.419193       3.396237
pct_Peu_pas_dipl -10.132755        19.615459    25.958720       4.378028
                 Overall sd      p.value
pct_Bac5ouplus    10.834337 9.987980e-25
pct_independants   3.522712 5.089931e-12
pct_CDI            5.860615 4.679173e-04
pct_Bac            2.652788 2.598789e-03
pct_inactifs       5.899629 6.181307e-05
pct_chômeurs       2.494066 4.177353e-08
pct_immi           7.471382 5.383110e-24
pct_Peu_pas_dipl  11.268278 3.953515e-24

$`3`
                     v.test Mean in category Overall mean sd in category
pct_Peu_pas_dipl  11.108794        47.860127    25.958720       8.724913
pct_immi          10.204315        34.758474    21.419193       5.420073
pct_chômeurs       7.739484        11.759072     8.381789       2.004059
pct_Bac            5.356828        16.112823    13.626499       2.680740
pct_inactifs       4.862449        31.476001    26.456884       6.184029
pct_CDI           -2.348464        45.368607    47.776708       5.111738
pct_EDDouautres   -2.532730         7.255051     8.397855       2.093393
pct_independants  -6.981995         6.090546    10.393872       2.098240
pct_Bac5ouplus   -10.144576        16.381940    35.612143       6.176300
                 Overall sd      p.value
pct_Peu_pas_dipl  11.268278 1.136850e-28
pct_immi           7.471382 1.896541e-24
pct_chômeurs       2.494066 9.982125e-15
pct_Bac            2.652788 8.469552e-08
pct_inactifs       5.899629 1.159425e-06
pct_CDI            5.860615 1.885101e-02
pct_EDDouautres    2.578904 1.131780e-02
pct_independants   3.522712 2.910176e-12
pct_Bac5ouplus    10.834337 3.502952e-24</code></pre>
<p>Pour le 1er clustering/typologie, on peut voir que la 1ère classe est marquée par une surreprésentation du nombre personnes (de référence du ménage) en CDI, de bac+5 ou plus, mais aussi d’inactifs et de personnes ayant le bac, ou encore d’indépendants, et dans une moindre mesure de chômeurs, d’employés en CDD, d’immigrés, ou de peu diplômés. Au contraire, la 3ème classe se caractérise par une surreprésentation des peu ou pas diplômés, des immigrés et des chômeurs, et une, elle aussi, marquée par une surreprésentation des personnes de bac+5 ou plus, d’indépendants et de personnes employées en CDI, mais aussi, si ce n’est surtout, par une sous-représentation d’un ensemble d’autres variables.</p>
<p>Pour le 2ème clustering/typologie, la 1ère classe est caractérisée par une surreprésentation des peu ou pas diplômés et des immigrés, et une sous-représentation des indépendants, des personnes employés en CDI et des personnes ayant un bac+5 ; elle semble donc proche de la 3ème classe de la 1ère typologie mais pas dans les quartiers/IRIS concernés : elle correspond en effet à plusieurs quartiers du nord du 20ème arrondissement et quelques uns du 12ème en encore moins du 11ème, alors que la 3ème classe de la 1ère typologie est présente essentiellement sur les boulevards périphériques. Quant à la 2ème classe, elle est marquée par une surreprésentation de bac+5 ou plus, d’indépendants et de personnes employés en CDI, et au contraire par une sous-représentation des personnes ayant un bac, des inactifs, des chômeurs, des immigrés et des peu ou pas diplômés ; c’est la classe qui rassemble le plus d’IRIS sur la carte des 3 arrondissements, probablement la plus hétérogène donc. Enfin, la classe 3 est caractérisée par une surreprésentation des personnes peu ou pas diplômés, des immigrés, des chômeurs, des personnes ayant le bac ou encore des inactifs, et une sous-représentation des personnes employés en CDI, mais aussi en contrats courts ou d’autres statuts, des indépendants et des bac+5 ou plus ; sur la carte elle correspondait à des quartiers situés sur les boulevards périphériques intérieurs.</p>
<p>Cette typologie semble ainsi plus claire, la classe 2 correspond plutôt aux quartiers des catégories sociales supérieures ou moyennes-supérieures (professions intermédiaires), la classe 4 aux quartiers plutôt avec des retraités mais aussi des cadres ou encore des femmes, ces deux classes s’opposent semble-t-il à la 3ème classe qui correspond plutôt aux quartiers plus modestes socialement ; la classe 1 peut rassembler les quartiers constitués des autres inactifs, comme les étudiants, et des ouvriers. Il nous faudrait nénmoins d’autres variables pour arriver à davantage les caractériser.</p>
<p>On peut recupérer les statistiques de la moyenne de ces variables pour les visualiser sur un graphique comparant les 3 classes, ainsi que l’ensemble des IRIS.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="11-Clustering-application.html#cb184-1" aria-hidden="true" tabindex="-1"></a>stats_var_CAH <span class="ot">&lt;-</span> desc_cl_soprof_p<span class="sc">$</span>call<span class="sc">$</span>X</span>
<span id="cb184-2"><a href="11-Clustering-application.html#cb184-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-3"><a href="11-Clustering-application.html#cb184-3" aria-hidden="true" tabindex="-1"></a>mean_var_CAH_a <span class="ot">&lt;-</span> stats_var_CAH <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(classe3_soprof_p) <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(mean)</span>
<span id="cb184-4"><a href="11-Clustering-application.html#cb184-4" aria-hidden="true" tabindex="-1"></a>mean_var_CAH_b <span class="ot">&lt;-</span> stats_var_CAH <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>classe3_soprof_p) <span class="sc">%&gt;%</span> </span>
<span id="cb184-5"><a href="11-Clustering-application.html#cb184-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(mean) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">classe3_soprof_p=</span><span class="st">&quot;Ensemble&quot;</span>)</span>
<span id="cb184-6"><a href="11-Clustering-application.html#cb184-6" aria-hidden="true" tabindex="-1"></a>mean_var_CAH <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mean_var_CAH_a, mean_var_CAH_b)</span>
<span id="cb184-7"><a href="11-Clustering-application.html#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(mean_var_CAH_a, mean_var_CAH_b)</span>
<span id="cb184-8"><a href="11-Clustering-application.html#cb184-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-9"><a href="11-Clustering-application.html#cb184-9" aria-hidden="true" tabindex="-1"></a>mean_var_CAH <span class="sc">%&gt;%</span>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="sc">-</span>classe3_soprof_p,  <span class="at">names_to=</span><span class="st">&quot;Variable&quot;</span>,</span>
<span id="cb184-10"><a href="11-Clustering-application.html#cb184-10" aria-hidden="true" tabindex="-1"></a>                               <span class="at">values_to=</span><span class="st">&quot;Value&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb184-11"><a href="11-Clustering-application.html#cb184-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Value=</span><span class="fu">round</span>(Value, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb184-12"><a href="11-Clustering-application.html#cb184-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>Variable, <span class="at">y=</span>Value, <span class="at">fill=</span>classe3_soprof_p) <span class="sc">+</span> </span>
<span id="cb184-13"><a href="11-Clustering-application.html#cb184-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>classe3_soprof_p) <span class="sc">+</span>  </span>
<span id="cb184-14"><a href="11-Clustering-application.html#cb184-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set2&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-15"><a href="11-Clustering-application.html#cb184-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> Value), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb184-16"><a href="11-Clustering-application.html#cb184-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">color=</span><span class="st">&quot;gray35&quot;</span>, <span class="at">size=</span><span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb184-17"><a href="11-Clustering-application.html#cb184-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grey</span>() <span class="sc">+</span> </span>
<span id="cb184-18"><a href="11-Clustering-application.html#cb184-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Moyenne des variables actives selon les classes et pour l&#39;ensemble&quot;</span>, </span>
<span id="cb184-19"><a href="11-Clustering-application.html#cb184-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot; &quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb184-20"><a href="11-Clustering-application.html#cb184-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;% de Bac&quot;</span>,<span class="st">&quot;% de Bac+5 ou plus&quot;</span>, <span class="st">&quot;% de peu ou pas diplômés&quot;</span>,</span>
<span id="cb184-21"><a href="11-Clustering-application.html#cb184-21" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;% de chômeurs&quot;</span>,<span class="st">&quot;% de salariés en CDI&quot;</span>, <span class="st">&quot;% d&#39;inactifs&quot;</span>,</span>
<span id="cb184-22"><a href="11-Clustering-application.html#cb184-22" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;% de salariés en EDD&quot;</span>, <span class="st">&quot;% d&#39;indépendants&quot;</span>,<span class="st">&quot;% d&#39;immigrés&quot;</span>)) <span class="sc">+</span></span>
<span id="cb184-23"><a href="11-Clustering-application.html#cb184-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb184-24"><a href="11-Clustering-application.html#cb184-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">75</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">7</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Compar_mean_bis-1.svg" width="672" /></p>
<p>Pour aller plus loin dans la compréhension des classes, il faut utiliser d’autres variables et procéder de même à des analyses descriptives croisant ces variables avec les 3 classes de la typologie obtenue. Pour cela, il faut récupérer des variables de la table initiale du RP et sortir des tableaux de statistiques ou des graphiques comme précédemment.</p>
<!--On peut aussi construire d'autres graphiques plus généraux et sur d'autres variables.-->
<!--On observe en plus des résultats précédents que les jeunes de moins de 30 ans constituent une part plus importante de la population de la classe 2, alors qu'ils constituent une part se situant dans la moyenne (ensemble) pour la classe 1. Cette dernière classe comptent un peu plus de 30-39 ans dans sa population.Deux autres classes se distinguent : la classe 3 comprend davantage de personnes âgés entre 40 et 64 ans ; alors que la classe 4 comprend beaucoup plus de personnes âgées de plus de 64 ans par rapport à l'ensemble, ce qui paraît logique puisqu'on a vu qu'elle était caractérisée par une surreprésentation des retraités. En revanche, contrairement à ce qu'on pouvait penser, c'est davantage la classe 2 qui rassemble plus de jeunes par rapport à la classe 1 (alors qu'il y avait une surreprésentation des autres inactifs, laissant penser à plus d'étudiants...).   
Par rapport au lieu de naissance des habitants de chaque classe, on confirme que la classe 3 comporte une part plus importante de personnes nées à l'étranger (plus de 30%, par rapport à environ 24% dans l'ensemble). Dans le même temps, c'est aussi dans cette classe que l'on note une part de personnées nées dans le même département,  donc peu mobiles, plus importante par rapport à l'ensemble. Au contraire, la classe 2, et dans une moins mesure la classe 4, ont des part de personnées nées dans une autre région plus importante : cela est assez cohérent avec le fait que ce sont les 2 classes qui rassemblent une population plus favorisée, traditionnellement plus mobile.  
Ensuite, la répartition des habitants selon le diplôme confirme plutôt les résultats précédents notamment par  rapport aux PCS. Le classe 3 se caractérise par une forte proportion de personnes peu ou pas diplômés, mais aussi de niveau Bac ou encore de jeunes (moins de 14 ans) ; alors qu'au contraire la classe 2, et dans une moindre  mesure 4, rassemble une part plus importante de Bac+5 ou plus. La classe 1 comprend également un peu plus de  jeunes de moins de 14 ans, et moins de Bac+5 ou plus.  
Enfin, on trouve une part plus importante d'actifs occupés chez les habitants de la classe 2 ; une part plus importante d'autres inactifs chez les habitants de la classe 3, mais également chez ceux de la classe 4  (retraités) ; une part plus importante de chômeurs dans la classe 3 ; et enfin une part un peu plus importante d'élèves ou étudiants dans les classe 1 et 3.   
  
    
Ainsi, ce 2nd clustering, qui semble plus pertinent que le 1er, a permis de regrouper les quartiers de l'Est parisien en 4 grandes classes selon leurs caractéristiques socio-professionnelles : 

- une 1ère classe rassemblant des habitants de quartiers présents surtout dans le 20ème et le 12ème arrondissement, qui sont un peu plus souvent inactifs hors retraités et ouvriers, et avec un peu plus  d'enfants, elle rassemble également des quartiers particuliers avec le cimetière du Père Lachaise ou encore le Par de Bercy ; 
- une seconde classe qui regrouperait donc des individus de milieux plutôt favorisés, plus jeunes, plus diplômés, dans des quartiers principalement du 11ème arrondissement, et du nord-est du 12ème arrondissement (Roquette, Charonne, Bastille - Sainte-Marguerite et Quinze-vingt) ; 
- une troisième classe, qui s'oppose à cette 2ème classe ainsi que la dernière, rassemble au contraire desquartiers plus défavorisés qui se situent en majorité sur les boulevards périphériques et davantage dans le 20ème ;
- enfin une 4ème classe qui elle aussi rassemble une population plus favorisée avec surtout davantage de retraités dans des quartiers principalement du 12ème arrondissement (Bel-Air, Picpus).

Si l'on avait choisi 3 classes, on aurait eu un regroupement de la classe 2 et 4 (les 2 classes à droite du dendogramme ; la classe 3 étant celle le plus à gauche du dendogramme).-->
<!-- Enfin, on a vu qu'il y avait plusieurs méthodes d'agrégation, ici nous avons utilisé le critère de Ward. Il est possible de tester d'autres méthodes et de comparer les dendogrammes alors obtenus. -->
<!-- On observe donc de fortes différences entre les dendogrammes. Par exemple, la méthode du "lien simple" ou "minimum" va avoir tendance à construire une grosse classe et une autre plus petite, c'est bien ce que l'on voit ici ; alors qu'au contraire, la méthode d'agrégation dite "complete" tend à construire des groupes plutôt de taille égale, en revanche, il faut savoir qu'elle est sensible aux points aberrants (on voit que ce n'est pas le cas ici). Enfin, on voit également que la méthode du "centroïd" (barycentre/centre de gravité des classes) produit un dendogramme particulier et déséquilibré comme le premier graphe (méthode du "lien simple").  C'est bien la méthode de Ward qui est la plus utilisée en pratique.   -->
</div>
</div>
<div id="la-méthode-des-k-means-appliquée-à-nos-données" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> La méthode des <em>k-means</em> appliquée à nos données<a href="11-Clustering-application.html#la-méthode-des-k-means-appliquée-à-nos-données" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On repart de notre table de données centrées et réduites (“clust_sc”) et on lui applique la fonction <code>kmeans</code> de <code>R</code>. Comme décrit <a href="https://camille-sisi.github.io/Data-Mining-2022/14-Clustering-theorique.html" target="_blank">ici</a> de manière théorique, il faut : i) choisir le nombre de classes que l’on souhaite avoir avec l’option <code>centers=k</code>, pour pouvoir comparer avec la méthode précédente de la CAH, on va donc choisir le même nombre de groupe, soit 3 ; ii) et réitérer toute la procédure plusieurs fois avec des individus pris au départ qui soient différents, avec l’option <code>nstart=</code>, ici on choisit 100 essais, et la fonction prendra le meilleur pour l’algorithme.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="11-Clustering-application.html#cb185-1" aria-hidden="true" tabindex="-1"></a>clust.kmeans <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(clust_socioprof_prop, <span class="at">centers=</span><span class="dv">3</span>, <span class="at">nstart=</span><span class="dv">100</span>)</span>
<span id="cb185-2"><a href="11-Clustering-application.html#cb185-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-3"><a href="11-Clustering-application.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="co"># On affiche ensuite les résultats principaux : effectif des classes, moyenne des </span></span>
<span id="cb185-4"><a href="11-Clustering-application.html#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="co"># variables actives (centrées réduites), groupes d&#39;affectation des individus, </span></span>
<span id="cb185-5"><a href="11-Clustering-application.html#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="co"># proportion d&#39;inertie expliquée par la partition (ici 62%)</span></span>
<span id="cb185-6"><a href="11-Clustering-application.html#cb185-6" aria-hidden="true" tabindex="-1"></a>clust.kmeans</span></code></pre></div>
<pre><code>K-means clustering with 3 clusters of sizes 86, 76, 27

Cluster means:
   pct_Bac pct_Bac5ouplus pct_Peu_pas_dipl pct_chômeurs  pct_CDI pct_inactifs
1 12.66457       44.27684         17.61418     7.505324 48.67045     24.48938
2 13.96133       32.37426         27.39908     8.322048 47.58635     26.52762
3 15.84696       16.50645         48.66870    11.475721 45.34816     32.11125
  pct_EDDouautres pct_independants pct_immi
1        8.862045        12.286548 16.59763
2        8.323350         9.809732 22.12509
3        7.175518         6.165278 35.08928

Clustering vector:
   Folie Méricourt 1    Folie Méricourt 2    Folie Méricourt 3 
                   2                    1                    1 
   Folie Méricourt 4    Folie Méricourt 5    Folie Méricourt 6 
                   1                    1                    1 
   Folie Méricourt 7    Folie Méricourt 8    Folie Méricourt 9 
                   1                    1                    2 
  Folie Méricourt 10   Folie Méricourt 11   Folie Méricourt 12 
                   2                    3                    3 
  Folie Méricourt 13   Folie Méricourt 14   Folie Méricourt 15 
                   2                    1                    1 
    Saint-Ambroise 1     Saint-Ambroise 2     Saint-Ambroise 3 
                   2                    1                    1 
    Saint-Ambroise 4     Saint-Ambroise 5     Saint-Ambroise 6 
                   1                    1                    1 
    Saint-Ambroise 7     Saint-Ambroise 8     Saint-Ambroise 9 
                   2                    1                    1 
   Saint-Ambroise 10    Saint-Ambroise 11    Saint-Ambroise 12 
                   1                    1                    1 
   Saint-Ambroise 13    Saint-Ambroise 14           Roquette 1 
                   1                    1                    2 
          Roquette 2           Roquette 3           Roquette 4 
                   2                    3                    2 
          Roquette 5           Roquette 6           Roquette 7 
                   2                    1                    2 
          Roquette 8           Roquette 9          Roquette 10 
                   2                    2                    1 
         Roquette 11          Roquette 12          Roquette 13 
                   1                    1                    1 
         Roquette 14          Roquette 15          Roquette 16 
                   1                    1                    1 
         Roquette 17          Roquette 18          Roquette 19 
                   1                    1                    2 
         Roquette 20          Roquette 21  Sainte-Marguerite 1 
                   2                    1                    1 
 Sainte-Marguerite 2  Sainte-Marguerite 3  Sainte-Marguerite 4 
                   1                    1                    1 
 Sainte-Marguerite 5  Sainte-Marguerite 6  Sainte-Marguerite 7 
                   1                    1                    1 
 Sainte-Marguerite 8  Sainte-Marguerite 9 Sainte-Marguerite 10 
                   1                    1                    1 
Sainte-Marguerite 11 Sainte-Marguerite 12 Sainte-Marguerite 13 
                   1                    1                    1 
           Bel-Air 1            Bel-Air 2            Bel-Air 3 
                   3                    1                    2 
           Bel-Air 4            Bel-Air 5            Bel-Air 6 
                   1                    2                    1 
           Bel-Air 7            Bel-Air 8            Bel-Air 9 
                   1                    1                    1 
          Bel-Air 10           Bel-Air 11           Bel-Air 12 
                   3                    3                    2 
          Bel-Air 13           Bel-Air 14             Picpus 1 
                   2                    1                    2 
            Picpus 2             Picpus 3             Picpus 4 
                   2                    2                    2 
            Picpus 5             Picpus 6             Picpus 8 
                   1                    2                    1 
            Picpus 9            Picpus 10            Picpus 11 
                   3                    1                    1 
           Picpus 12            Picpus 13            Picpus 14 
                   1                    2                    2 
           Picpus 15            Picpus 16            Picpus 17 
                   1                    1                    1 
           Picpus 18            Picpus 19            Picpus 20 
                   1                    2                    1 
           Picpus 21            Picpus 22            Picpus 23 
                   1                    2                    1 
           Picpus 24              Bercy 1              Bercy 2 
                   1                    2                    2 
             Bercy 3              Bercy 4              Bercy 5 
                   2                    2                    2 
     Quinze-Vingts 1      Quinze-Vingts 2      Quinze-Vingts 3 
                   2                    2                    1 
     Quinze-Vingts 4      Quinze-Vingts 5      Quinze-Vingts 6 
                   1                    1                    1 
     Quinze-Vingts 7      Quinze-Vingts 8      Quinze-Vingts 9 
                   1                    2                    1 
    Quinze-Vingts 10     Quinze-Vingts 12     Quinze-Vingts 13 
                   1                    3                    1 
        Belleville 1         Belleville 2         Belleville 3 
                   2                    2                    3 
        Belleville 4         Belleville 5         Belleville 6 
                   1                    2                    1 
        Belleville 7         Belleville 8         Belleville 9 
                   2                    3                    2 
       Belleville 10        Belleville 11        Belleville 12 
                   2                    2                    2 
       Belleville 13        Belleville 14      Saint-Fargeau 1 
                   2                    2                    3 
     Saint-Fargeau 2      Saint-Fargeau 3      Saint-Fargeau 4 
                   2                    3                    3 
     Saint-Fargeau 5      Saint-Fargeau 6      Saint-Fargeau 7 
                   2                    2                    1 
     Saint-Fargeau 8      Saint-Fargeau 9     Saint-Fargeau 10 
                   2                    2                    2 
    Saint-Fargeau 11     Saint-Fargeau 12     Saint-Fargeau 13 
                   2                    2                    2 
    Saint-Fargeau 14     Saint-Fargeau 15     Saint-Fargeau 16 
                   2                    2                    2 
     Père Lachaise 1      Père Lachaise 2      Père Lachaise 3 
                   1                    2                    1 
     Père Lachaise 4      Père Lachaise 5      Père Lachaise 6 
                   2                    2                    3 
     Père Lachaise 7      Père Lachaise 8      Père Lachaise 9 
                   2                    3                    3 
    Père Lachaise 10     Père Lachaise 11     Père Lachaise 12 
                   3                    2                    2 
    Père Lachaise 13     Père Lachaise 14     Père Lachaise 15 
                   1                    1                    1 
    Père Lachaise 16           Charonne 1           Charonne 2 
                   2                    3                    1 
          Charonne 3           Charonne 4           Charonne 5 
                   2                    1                    1 
          Charonne 6           Charonne 7           Charonne 8 
                   1                    3                    3 
          Charonne 9          Charonne 10          Charonne 11 
                   3                    3                    3 
         Charonne 12          Charonne 13          Charonne 14 
                   2                    2                    2 
         Charonne 15          Charonne 16          Charonne 17 
                   1                    2                    2 
         Charonne 18          Charonne 19          Charonne 20 
                   2                    3                    3 
         Charonne 21          Charonne 22          Charonne 23 
                   3                    3                    2 
         Charonne 24          Charonne 25          Charonne 26 
                   2                    2                    2 

Within cluster sum of squares by cluster:
[1] 11509.264 10947.992  6198.029
 (between_SS / total_SS =  62.2 %)

Available components:

[1] &quot;cluster&quot;      &quot;centers&quot;      &quot;totss&quot;        &quot;withinss&quot;     &quot;tot.withinss&quot;
[6] &quot;betweenss&quot;    &quot;size&quot;         &quot;iter&quot;         &quot;ifault&quot;      </code></pre>
<p>On peut comparer avec les classes obtenues précédemment avec la CAH, simplement en croisant les deux variables de classe :</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="11-Clustering-application.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co">#correspondance avec les groupes de la CAH</span></span>
<span id="cb187-2"><a href="11-Clustering-application.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(classe3_soprof_p, clust.kmeans<span class="sc">$</span>cluster) </span></code></pre></div>
<pre><code>                
classe3_soprof_p  1  2  3
               1  1 40  1
               2 86 34  0
               3  0  2 26</code></pre>
<p>On voit ainsi que la classe 1 obtenue avec la CAH (1ère ligne du tableau) coïncide quasi-exactement avec la classe 2 de la méthode des <em>K-means</em>, de même la classe 3 de la CAH est la même que la classe 3 des <em>K-means</em> à 1 IRIS près, la classe 2 de la CAH est en revanche distribuée entre les classes 1 et 2 de la typologie des <em>K-means</em> . Autrement dit, on conclut à un changement de classes surtout pour des communes de la classe 2 précédente.</p>
<p>On a vu avec la description de la méthode, que ce qui est difficile ici c’est qu’on choisit nous-mêmes le nombre de classes dans une première étape sans savoir parfois pourquoi. Il faut donc souvent faire varier le nombre de classes de départ (<code>centers=k</code>), à ne pas confondre avec les individus centres initiaux de classes (ce que l’on a fait précédemment en indiquant l’option <code>nstart=100</code>). A partir d’un exemple de code récupéré sur un document de cours externe (<a href="https://eric.univ-lyon2.fr/~ricco/cours/didacticiels/R/cah_kmeans_avec_r.pdf">ici</a>), on peut créer une boucle pour répéter la procédure en changeant le nombre de classes, et ensuite construire un graphique visualisant l’indicateur de pourcentage d’inertie expliquée. Plus précisément, on fait tourner plusieurs fois la méthode des K-means sur notre base de données centrées-réduites pour un nombre de classes souhaitées variant entre 2 et 6, et on récupère la part de l’inertie expliquée par la partition obtenue (indicateur <code>between_SS / total_SS</code> que l’on a vu dans la sortie précédente). Puis, on crée un graphique représentant cette part pour chacune des partitions construites.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="11-Clustering-application.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Boucle pour calculer la part de l&#39;inertie expliquée par la partition, selon le nombre de classes souhaitées</span></span>
<span id="cb189-2"><a href="11-Clustering-application.html#cb189-2" aria-hidden="true" tabindex="-1"></a>inertie.expl <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="at">times=</span><span class="dv">6</span>)</span>
<span id="cb189-3"><a href="11-Clustering-application.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>){</span>
<span id="cb189-4"><a href="11-Clustering-application.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  clus <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(clust_socioprof_prop, <span class="at">centers=</span>k, <span class="at">nstart=</span><span class="dv">100</span>)  </span>
<span id="cb189-5"><a href="11-Clustering-application.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  inertie.expl[k] <span class="ot">&lt;-</span> clus<span class="sc">$</span>betweenss<span class="sc">/</span>clus<span class="sc">$</span>totss}</span>
<span id="cb189-6"><a href="11-Clustering-application.html#cb189-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-7"><a href="11-Clustering-application.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Création du graphique</span></span>
<span id="cb189-8"><a href="11-Clustering-application.html#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, inertie.expl, <span class="at">type=</span><span class="st">&quot;b&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes choisies&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Pourcentage d&#39;inertie expliquée par la partition&quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Compar_clK-means-1.svg" width="672" />
On observe sur ce graphique qu’à partir de k=3, autrement dit de 3 classes, la “création” d’une classe supplémentaire ne semble pas augmenter significativement la part d’inertie expliquée par la partition. Pour comprendre ce que revêt ce “significativement”, on peut regarder notamment la pente de chaque droite reliant les points d’une partition à une autre : pour la droite reliant le nombre de classes “2” et “3”, on voit que sa pente diminue déjà pas mal par rapport à la droite reliant les deux classes précédentes, et cela est encore plus visible pour les pentes suivantes.</p>
<p>Une autre méthode évoquée par le même document de cours propose d’utiliser le package <code>fpc</code> qui propose une fonction <code>kmeansruns</code> évaluant les différentes partitions à partir de 2 critères à choisir : l’indice de Calinski Harabasz - option <code>criterion="ch"</code>, ou celui de la “average silhouette width” (largeur moyenne de la silhouette) - option <code>criterion="asw"</code>. On peut ensuite construire un graphique comme précédemment pour visualiser l’évolution de cet indice selon le nombre de classes de la partition.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="11-Clustering-application.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># OU utilisation du package fpc et de l&#39;indice de Calinski Harabasz  </span></span>
<span id="cb190-2"><a href="11-Clustering-application.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fpc)</span>
<span id="cb190-3"><a href="11-Clustering-application.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Evaluation des solutions</span></span>
<span id="cb190-4"><a href="11-Clustering-application.html#cb190-4" aria-hidden="true" tabindex="-1"></a>eval.kmeans <span class="ot">&lt;-</span> <span class="fu">kmeansruns</span>(clust_socioprof_prop,</span>
<span id="cb190-5"><a href="11-Clustering-application.html#cb190-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">krange=</span><span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb190-6"><a href="11-Clustering-application.html#cb190-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">criterion=</span><span class="st">&quot;ch&quot;</span>,)</span>
<span id="cb190-7"><a href="11-Clustering-application.html#cb190-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-8"><a href="11-Clustering-application.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Graphique</span></span>
<span id="cb190-9"><a href="11-Clustering-application.html#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, eval.kmeans<span class="sc">$</span>crit,<span class="at">type=</span><span class="st">&quot;b&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Nombre de classes&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Indice de Calinski Harabasz &quot;</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/Compar_clK-means_bis-1.svg" width="672" />
Pour lire et choisir le “bon” nombre de classes selon ce critère, il faut maximiser l’indice donc trouver le point le plus haut : ici, c’est la partition à 2 classes qui semble la “meilleure” typologie comme on l’avait vu dans la CAH avec le dendogramme, mais une partition en 3 classes semble plus intéressante pour l’interprétation.</p>
<!-- permet d'écrire du texte sans qu'il soit affiché, sorte de commentaires dans le script sans qu'il soit publié dans le doc final ! -->

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>Plus précisément, à chaque étape d’agrégation, la part de l’inertie interclasse passe en inertie intraclasse.<a href="11-Clustering-application.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="10-Retour-sur-Shiny.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="12-Modeles-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/github.io-Data-Mining-2023/master/11-Clustering-application.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
